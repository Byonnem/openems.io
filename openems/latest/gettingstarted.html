<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Getting Started :: Open Energy Management System</title>
    <link rel="canonical" href="https://openems.github.io/openems.io/openems/latest/gettingstarted.html">
    <meta name="keywords" content="AsciiDoc">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="icon" href="../../_/img/feneco.ico" type="image/x-icon">
<link rel="stylesheet" href="../../_/css/vendor/docsearch.min.css">  </head>
  <body class="article">
<header class="header">
  <nav class="navbar" color="#2d8fab">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://github.com/OpenEMS/openems">OpenEMS // Docs</a>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/OpenEMS/openems">
          <span class="gitlink">
          </span>
        </a>
      </div>
    </div>
  </nav>
</header><div class="main-wrapper">
<div class="navigation-container" data-component="openems" data-version="latest">
  <aside class="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="introduction.html">Open Energy Management System</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="introduction.html">Introduction</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="gettingstarted.html">Getting Started</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="coreconcepts.html">Core concepts &amp; terminology</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">OpenEMS Edge</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="edge/architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="edge/configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="edge/nature.html">Nature</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="edge/scheduler.html">Scheduler</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="edge/controller.html">Controller</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="edge/bridge.html">Bridge</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="edge/device_service.html">Device &amp; Service</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="edge/implement.html">Implementing a Device</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="edge/build.html">Build OpenEMS Edge</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="edge/deploy.html">Deploy OpenEMS Edge</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">OpenEMS UI</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ui/build.html">Build OpenEMS UI</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">OpenEMS Backend</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="backend/architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="backend/configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="backend/backend-to-backend.html">Backend-to-Backend</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="backend/build.html">Build OpenEMS Backend</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="backend/deploy.html">Deploy OpenEMS Backend</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="component-communication/index.html">Component Communication</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Simulation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="simulation/realtime.html">Real-Time Simulation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="simulation/ui-history.html">UI History Simulation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="documentation.html">Documentation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="randd.html">Research and Development</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://openems.github.io/openems.io/javadoc/">Javadoc</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">Open Energy Management System</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Open Energy Management System</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="introduction.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="introduction.html" class="home-link"></a>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="introduction.html">Open Energy Management System</a></li>
    <li class="crumb"><a href="gettingstarted.html">Getting Started</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/OpenEMS/openems/tree/HEAD/doc/modules/ROOT/pages/gettingstarted.adoc">Edit this Page</a></div>
</div>
<article class="doc">
<h1>Getting Started</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_download_the_source_code">1. Download the source code</a></li>
<li><a href="#_setup_eclipse_ide_for_openems_edge_and_backend">2. Setup Eclipse IDE for OpenEMS Edge and Backend</a></li>
<li><a href="#_run_openems_edge_and_start_simulator">3. Run OpenEMS Edge and start Simulator</a></li>
<li><a href="#_setup_visual_studio_code_for_openems_ui">4. Setup Visual Studio Code for OpenEMS UI</a></li>
<li><a href="#_run_openems_ui">5. Run OpenEMS UI</a></li>
<li><a href="#_integrate_openems_backend">6. Integrate OpenEMS Backend</a>
<ul class="sectlevel2">
<li><a href="#_run_and_configure_openems_backend">6.1. Run and configure OpenEMS Backend</a></li>
<li><a href="#_configure_openems_edge">6.2. Configure OpenEMS Edge</a></li>
<li><a href="#_connect_openems_ui_with_backend">6.3. Connect OpenEMS UI with Backend</a></li>
</ul>
</li>
<li><a href="#_next_steps">Next steps</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This quick 'Getting Started' should help you setup a complete development environment. On finishing you will have a working instance of OpenEMS Edge, with simulated energy storage and photovoltaic system, as well as an OpenEMS UI for monitoring the simulator inside your web browser. Finally an instance of OpenEMS Backend is added to simulate a cloud backend that connects UI and Edge.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_download_the_source_code"><a class="anchor" href="#_download_the_source_code"></a>1. Download the source code</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download any <a href="https://git-scm.com">git client <span class="icon"><i class="fa fa-external-link"></i></span></a> and install it. Our recommendation is <a href="https://www.sourcetreeapp.com/">Sourctree by Atlassian <span class="icon"><i class="fa fa-external-link"></i></span></a></p>
</li>
<li>
<p>Clone the OpenEMS git repository</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In Sourcetree:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>press <b class="button">File</b> &#8594; <b class="button">Clone</b></p>
</li>
<li>
<p>enter the git repository path <code><a href="https://github.com/OpenEMS/openems.git" class="bare">https://github.com/OpenEMS/openems.git</a></code></p>
</li>
<li>
<p>select a target directory, for example <code>C:\Users\your.user\git\openems</code></p>
</li>
<li>
<p>open <b class="button">Advanced Settings</b></p>
</li>
<li>
<p>select the branch <b class="button">develop</b></p>
</li>
<li>
<p>and press <b class="button">Clone</b>.</p>
<div class="imageblock">
<div class="content">
<img src="_images/sourcetree.png" alt="Cloning the git repository using Sourcetree">
</div>
<div class="title">Figure 1. Cloning the git repository using Sourcetree</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Alternatively: with the git command line utility</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>open a console</p>
</li>
<li>
<p>change to the target directory</p>
</li>
<li>
<p>execute <code>git clone <a href="https://github.com/OpenEMS/openems.git" class="bare">https://github.com/OpenEMS/openems.git</a> --branch develop</code></p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Git is downloading the complete source code for you.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setup_eclipse_ide_for_openems_edge_and_backend"><a class="anchor" href="#_setup_eclipse_ide_for_openems_edge_and_backend"></a>2. Setup Eclipse IDE for OpenEMS Edge and Backend</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Prepare Eclipse IDE</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Download <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">Java SE Development Kit 8 <span class="icon"><i class="fa fa-external-link"></i></span></a> and install it</p>
</li>
<li>
<p>Download <a href="https://www.eclipse.org">Eclipse for Java <span class="icon"><i class="fa fa-external-link"></i></span></a>, install and start it</p>
</li>
<li>
<p>On first start you will get asked to create a workspace.
Select a directory - for example <code>C:\Users\your.user\git\openems-workspace</code> - and press <b class="button">Launch</b>. <em>The directory needs to be different from your source code directory selected above.</em></p>
<div class="imageblock">
<div class="content">
<img src="_images/eclipse-workspace.png" alt="Creating a workspace in Eclipse IDE">
</div>
<div class="title">Figure 2. Creating a workspace in Eclipse IDE</div>
</div>
</li>
<li>
<p>Install <a href="http://bndtools.org">BndTools <span class="icon"><i class="fa fa-external-link"></i></span></a> in Eclipse:</p>
<div class="paragraph">
<p>Menu: <b class="button">Help</b> →  <b class="button">Eclipse Marketplace&#8230;&#8203;</b> → <b class="button">Find:</b> → enter <b class="button">Bndtools</b> → press <b class="button">Install</b></p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Import OpenEMS component projects (OSGi bundles):</p>
<div class="paragraph">
<p>Menu: <b class="button">File</b> →  <b class="button">Import&#8230;&#8203;</b> → <b class="button">Bndtools</b> → <b class="button">Existing Bnd Workspace</b> → Root directory: <b class="button">Browse&#8230;&#8203;</b> → select the directory with the source code - for example <code>C:\Users\your.user\git\openems</code> → <b class="button">OK</b> → <b class="button">Finish</b> → "Switch to Bndtools perspective?" <b class="button">yes</b></p>
</div>
</li>
<li>
<p>Eclipse should have successfully built OpenEMS Edge and Backend, showing no entry in Problems.</p>
<div class="imageblock">
<div class="content">
<img src="_images/eclipse-no-problems.png" alt="Eclipse IDE showing 'no problems'">
</div>
<div class="title">Figure 3. Eclipse IDE showing 'no problems'</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_run_openems_edge_and_start_simulator"><a class="anchor" href="#_run_openems_edge_and_start_simulator"></a>3. Run OpenEMS Edge and start Simulator</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run OpenEMS Edge</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In Eclipse IDE open the project <b class="button">io.openems.edge.application</b> and double click on <b class="button">EdgeApp.bndrun</b>.</p>
<div class="imageblock">
<div class="content">
<img src="_images/eclipse-io.openems.edge.application.png" alt="io.openems.edge.application project in Eclipse IDE">
</div>
<div class="title">Figure 4. io.openems.edge.application project in Eclipse IDE</div>
</div>
</li>
<li>
<p>Click on <b class="button">Run OSGi</b> to run OpenEMS Edge. You should see log outputs on the console inside Eclipse IDE.</p>
<div class="imageblock">
<div class="content">
<img src="_images/eclipse-edge-initial-log-output.png" alt="OpenEMS Edge initial log output">
</div>
<div class="title">Figure 5. OpenEMS Edge initial log output</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Configure and start the Simulator</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Open the <a href="http://localhost:8080/system/console/configMgr">Apache Felix Web Console Configuration <span class="icon"><i class="fa fa-external-link"></i></span></a>.</p>
<div class="paragraph">
<p>Login with username <strong>admin</strong> and password <strong>admin</strong>.</p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Note: <strong>Apache Felix Web Console Configuration</strong> only works with a running console, otherwise you will receive a <strong>error message</strong> on your Browser.</p>
</div>
<div class="paragraph">
<p>+
.Apache Felix Web Console Configuration
image::apache-felix-console-configuration.png[Apache Felix Web Console Configuration]</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Configure a Scheduler</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The Scheduler is responsible for executing the control algorithms (Controllers) and defines the OpenEMS Edge application cycle
</td>
</tr>
</table>
</div>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Click on "Scheduler All Alphabetically"</p>
<div class="imageblock">
<div class="content">
<img src="_images/config-scheduler-all-alphabetically.png" alt="Configuration of All Alphabetically Scheduler">
</div>
<div class="title">Figure 6. Configuration of All Alphabetically Scheduler</div>
</div>
</li>
<li>
<p>Accept the default values and click <b class="button">Save</b></p>
</li>
<li>
<p>You created your first instance of an OpenEMS Component with ID "scheduler0". The log shows:</p>
<div class="paragraph">
<p><code>INFO  [onent.AbstractOpenemsComponent] [scheduler0] Activate AllAlphabetically [edge.scheduler.allalphabetically]</code></p>
</div>
<div class="paragraph">
<p>Add any other OpenEMS Components in the same way:</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Configure debug outputs on the console: "Controller Debug Log". The default values can be accepted without changes.</p>
<div class="imageblock">
<div class="content">
<img src="_images/config-controller-debug-log.png" alt="Configuration of Controller Debug Log">
</div>
<div class="title">Figure 7. Configuration of Controller Debug Log</div>
</div>
<div class="paragraph">
<p>The log shows:</p>
</div>
<div class="paragraph">
<p><code>INFO  [onent.AbstractOpenemsComponent] [ctrlDebugLog0] Activate DebugLog [edge.controller.debuglog]</code>,</p>
</div>
<div class="paragraph">
<p>followed once per second by</p>
</div>
<div class="paragraph">
<p><code>INFO  [e.controller.debuglog.DebugLog] [ctrlDebugLog0] _sum[Ess SoC:0 %|L:0 W Grid L:0 W Production L:0 W Consumption L:0 W]</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It is once per second because you accepted the default value of "1000 ms" for "Cycle time" in the Scheduler configuration.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Configure the standard-load-profile datasource using the according input file in the csv-reader: "Simulator DataSource: CSV Predefined". Select "H0_HOUSEHOLD_SUMMER_WEEKDAY_STANDARD_LOAD_PROFILE" as the "Source".</p>
<div class="imageblock">
<div class="content">
<img src="_images/config-simulator-datasource-standard-load-profile.png" alt="Configuration of Simulator DataSource: CSV Predefined as standard load profile datasource">
</div>
<div class="title">Figure 8. Configuration of Simulator DataSource: CSV Predefined as standard load profile datasource</div>
</div>
<div class="paragraph">
<p>The log shows:</p>
</div>
<div class="paragraph">
<p><code>INFO  [onent.AbstractOpenemsComponent] [datasource0] Activate CsvDatasourcePredefined [edge.simulator.datasource.csv]</code>,</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The data source was configured with the OpenEMS Component ID "datasource0" which will be used in the next step as reference.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Configure a simulated grid meter: "Simulator GridMeter Acting". Configure the Datasource-ID "datasource0" to refer to the data source configured above.</p>
<div class="imageblock">
<div class="content">
<img src="_images/config-simulator-grid-meter-acting.png" alt="Configuration of Simulator GridMeter Acting">
</div>
<div class="title">Figure 9. Configuration of Simulator GridMeter Acting</div>
</div>
<div class="paragraph">
<p>This time some more logs will show up. Most importantly they show, that the Grid meter now shows a power value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>INFO  [onent.AbstractOpenemsComponent] [meter0] Activate GridMeter [edge.simulator.meter.grid.acting]
[onent.AbstractOpenemsComponent] [meter0] Deactivate GridMeter [edge.simulator.meter.grid.acting]
[onent.AbstractOpenemsComponent] [meter0] Activate GridMeter [edge.simulator.meter.grid.acting]
[e.controller.debuglog.DebugLog] [ctrlDebugLog0] _sum[Ess SoC:0 %|L:0 W Grid L:1423 W Production L:0 W Consumption L:1423 W] meter0[1423 W]</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This setup causes the simulated grid-meter to take the standardized load-profiles data as input parameter.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
'Acting' referrs to the fact, that this meter actively provides data - in opposite to a 'Reacting' device that is reacting on other components: for example the 'Simulator.EssSymmetric.Reacting' configured below.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Configure a simulated reacting energy storage system: "Simulator EssSymmetric Reacting". The default values can be accepted without changes. (If you choose an other setup as the one described here you may have to create a new Datasource-Component and provide its ID here. The actual data is ignored, but the Datasource&#8217;s Time-Delta value is required to calculate values with time-dependant units.)</p>
<div class="imageblock">
<div class="content">
<img src="_images/config-simulator-esssymmetric-reacting.png" alt="Configuration of Simulator EssSymmetric Reacting">
</div>
<div class="title">Figure 10. Configuration of Simulator EssSymmetric Reacting</div>
</div>
<div class="paragraph">
<p>The log shows:</p>
</div>
<div class="paragraph">
<p><code>INFO  [e.controller.debuglog.DebugLog] [ctrlDebugLog0] _sum[Ess SoC:50 %|L:0 W Grid L:864 W Production L:0 W Consumption L:864 W] ess0[SoC:50 %|L:0 W|OnGrid] meter0[864 W]</code></p>
</div>
<div class="paragraph">
<p>Note, that the DebugLog now shows data for the battery, but the charge/discharge power stays at "0 W" and the state of charge stays at "50 %" as configured. Next step is to configure a control algorithm that tells the battery to charge or discharge.</p>
</div>
</li>
<li>
<p>Configure the self-consumption optimization algorithm: "Controller Balancing Symmetric". Configure the Ess-ID "ess0" and Grid-Meter-ID "meter0" to refer to the components configured above.</p>
<div class="imageblock">
<div class="content">
<img src="_images/config-controller-balancing-symmetric.png" alt="Configuration of Symmetric Balancing Controller">
</div>
<div class="title">Figure 11. Configuration of Symmetric Balancing Controller</div>
</div>
<div class="paragraph">
<p>The log shows:</p>
</div>
<div class="paragraph">
<p><code>INFO  [e.controller.debuglog.DebugLog] [ctrlDebugLog0] _sum[Ess SoC:49 %|L:1167 W Grid L:-39 W Production L:0 W Consumption L:1128 W] ess0[SoC:49 %|L:1167 W|OnGrid] meter0[-39 W]</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note, how the Controller now tells the battery to discharge (<code>Ess SoC:49 %|L:1167 W</code>), trying to balance the Grid power to "0 W" (<code>Grid L:-39 W</code>):
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Configure the websocket Api Controller: "Controller Api Websocket". The default values can be accepted without changes.</p>
<div class="imageblock">
<div class="content">
<img src="_images/config-controller-api-websocket.png" alt="Configuration of Controller Api Websocket">
</div>
<div class="title">Figure 12. Configuration of Controller Api Websocket</div>
</div>
<div class="paragraph">
<p>The log shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>INFO  [onent.AbstractOpenemsComponent] [ctrlApiWebsocket0] Activate WebsocketApi [edge.controller.api.websocket]
INFO  [ler.api.websocket.WebsocketApi] [ctrlApiWebsocket0] Websocket-Api started on port [8085].</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The Controller Api Websocket is required to enable access to OpenEMS Edge by a local OpenEMS UI.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setup_visual_studio_code_for_openems_ui"><a class="anchor" href="#_setup_visual_studio_code_for_openems_ui"></a>4. Setup Visual Studio Code for OpenEMS UI</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download <a href="https://nodejs.org">node.js LTS <span class="icon"><i class="fa fa-external-link"></i></span></a> and install it.</p>
</li>
<li>
<p>Download <a href="https://code.visualstudio.com/">Visual Studio Code <span class="icon"><i class="fa fa-external-link"></i></span></a>, install and start it.</p>
</li>
<li>
<p>Open OpenEMS UI source code in Visual Studio Code:</p>
<div class="paragraph">
<p>Menu: <b class="button">File</b> → <b class="button">Open Folder&#8230;&#8203;</b> → Select the <code>ui</code> directory inside the downloaded source code (for example <code>C:\Users\your.user\git\openems\ui</code>) → <b class="button">Select directory</b></p>
</div>
</li>
<li>
<p>Open the integrated terminal:</p>
<div class="paragraph">
<p>Menu: <b class="button">Terminal</b> → <b class="button">New Terminal</b></p>
</div>
</li>
<li>
<p>Install <a href="https://cli.angular.io/">Angular CLI <span class="icon"><i class="fa fa-external-link"></i></span></a>:</p>
<div class="paragraph">
<p><code>npm install -g @angular/cli</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you receive an error message that the command <code>npm</code> could not be found, make sure that node.js is installed and restart Visual Studio Code.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Resolve and download dependencies:</p>
<div class="paragraph">
<p><code>npm install</code></p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_run_openems_ui"><a class="anchor" href="#_run_openems_ui"></a>5. Run OpenEMS UI</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Visual Studios integrated terminal type&#8230;&#8203;</p>
<div class="paragraph">
<p><code>ng serve</code></p>
</div>
<div class="paragraph">
<p>The log shows:</p>
</div>
<div class="paragraph">
<p><code>NG Live Development Server is listening on localhost:4200, open your browser on <a href="http://localhost:4200/" class="bare">http://localhost:4200/</a></code></p>
</div>
</li>
<li>
<p>Open a browser at <a href="http://localhost:4200" class="bare">http://localhost:4200</a></p>
</li>
<li>
<p>You should see OpenEMS UI. Log in as user "guest" by clicking on the tick mark. Alternatively type "admin" in the password field to log in with extended permissions.</p>
<div class="imageblock">
<div class="content">
<img src="_images/openems-ui-login.png" alt="OpenEMS UI Login screen">
</div>
<div class="title">Figure 13. OpenEMS UI Login screen</div>
</div>
</li>
<li>
<p>Change to the Energymonitor by clicking on the arrow.</p>
<div class="imageblock">
<div class="content">
<img src="_images/openems-ui-overview.png" alt="OpenEMS UI Overview screen">
</div>
<div class="title">Figure 14. OpenEMS UI Overview screen</div>
</div>
</li>
<li>
<p>You should see the Energymonitor showing the same data as the DebugLog output on the console.</p>
<div class="imageblock">
<div class="content">
<img src="_images/openems-ui-edge-overview.png" alt="OpenEMS UI Energymonitor screen">
</div>
<div class="title">Figure 15. OpenEMS UI Energymonitor screen</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
OpenEMS UI will complain that "no timedata source is available". Because of this the historic chart is not yet functional.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_integrate_openems_backend"><a class="anchor" href="#_integrate_openems_backend"></a>6. Integrate OpenEMS Backend</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Instead of having Edge and UI talk to each other directly, the communication can also be proxied via Backend.</p>
</div>
<div class="sect2">
<h3 id="_run_and_configure_openems_backend"><a class="anchor" href="#_run_and_configure_openems_backend"></a>6.1. Run and configure OpenEMS Backend</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Eclipse IDE open the project <b class="button">io.openems.backend.application</b> and double click on <b class="button">BackendApp.bndrun</b>.</p>
<div class="imageblock">
<div class="content">
<img src="_images/eclipse-io.openems.backend.application.png" alt="io.openems.backend.application project in Eclipse IDE">
</div>
<div class="title">Figure 16. io.openems.backend.application project in Eclipse IDE</div>
</div>
</li>
<li>
<p>Click on <b class="button">Run OSGi</b> to run OpenEMS Backend. You should see log outputs on the console inside Eclipse IDE.</p>
<div class="imageblock">
<div class="content">
<img src="_images/eclipse-backend-initial-log-output.png" alt="OpenEMS Backend initial log output">
</div>
<div class="title">Figure 17. OpenEMS Backend initial log output</div>
</div>
</li>
<li>
<p>Configure the Backend</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Open the <a href="http://localhost:8079/system/console/configMgr">Apache Felix Web Console Configuration <span class="icon"><i class="fa fa-external-link"></i></span></a>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Apache Felix Web Console for OpenEMS Backend is started on port 8079 by default. This is configured using the <code>org.osgi.service.http.port</code> setting in BackendApp.bndrun.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Login with username <strong>admin</strong> and password <strong>admin</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/apache-felix-console-backend-configuration.png" alt="Apache Felix Web Console Configuration for OpenEMS Backend">
</div>
<div class="title">Figure 18. Apache Felix Web Console Configuration for OpenEMS Backend</div>
</div>
</li>
<li>
<p>Configure Edge.Websocket</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <strong>Edge.Websocket</strong> service is responsible for the communication between OpenEMS Backend and OpenEMS Edge.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the example we are configuring the Port 8081. This port needs to match with what we configure later in OpenEMS Edge.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/config-backend-edge.websocket.png" alt="Configuration of Backend Edge.Websocket">
</div>
<div class="title">Figure 19. Configuration of Backend Edge.Websocket</div>
</div>
</li>
<li>
<p>Configure Ui.Websocket</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <strong>Ui.Websocket</strong> service is responsible for the communication between OpenEMS Backend and OpenEMS UI.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the example we are configuring the Port 8082. This port needs to match with what we configure later in the OpenEMS UI environment file.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/config-backend-ui.websocket.png" alt="Configuration of Backend Ui.Websocket">
</div>
<div class="title">Figure 20. Configuration of Backend Ui.Websocket</div>
</div>
</li>
<li>
<p>Configure Timedata</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <strong>Timedata</strong> service provider is responsible for holding the current and historic data of each connected Edge device.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the example we are configuring the <strong>Timedata.Dummy</strong> service. It takes no configuration parameters, so just press <b class="button">Save</b>. In a production system you would want to use a real implementation like <strong>Timedata.InfluxDB</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/config-backend-timedata.dummy.png" alt="Configuration of Backend Timedata.Dummy">
</div>
<div class="title">Figure 21. Configuration of Backend Timedata.Dummy</div>
</div>
</li>
<li>
<p>Configure Metadata</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <strong>Metadata</strong> service provider is responsible for authentication of Edge devices and Users connecting via UI.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the example we are configuring the <strong>Metadata.Dummy</strong> service. It takes no configuration parameters, so just press <b class="button">Save</b>. In a production system you would want to use a real implementation like <strong>Metadata.File</strong> or <strong>Metadata.Odoo</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/config-backend-metadata.dummy.png" alt="Configuration of Backend Metadata.Dummy">
</div>
<div class="title">Figure 22. Configuration of Backend Metadata.Dummy</div>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_configure_openems_edge"><a class="anchor" href="#_configure_openems_edge"></a>6.2. Configure OpenEMS Edge</h3>
<div class="paragraph">
<p>Next we will configure OpenEMS Edge to connect to the OpenEMS Backend <code>Edge.Websocket</code> service.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Switch back to the <a href="http://localhost:8080/system/console/configMgr">Apache Felix Web Console Configuration for OpenEMS Edge <span class="icon"><i class="fa fa-external-link"></i></span></a>.</p>
</li>
<li>
<p>Configure the "Controller Api Backend" Component. The default values can be accepted without changes right now.</p>
<div class="imageblock">
<div class="content">
<img src="_images/config-controller-api-backend.png" alt="Configuration of Controller Api Backend">
</div>
<div class="title">Figure 23. Configuration of Controller Api Backend</div>
</div>
<div class="paragraph">
<p>Some configuration parameters are still noteworthy here:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>"Apikey" is used to authenticate this Edge at the Backend Metadata service.</p>
</li>
<li>
<p>"Uri" is set to <code>ws://localhost:8081</code>. This defines an unencrypted websocket ("ws://") connection to the local computer on port "8081" like we configured before for the Edge.Websocket.</p>
</li>
<li>
<p>"Cycle Time" defines how often data is sent to Backend</p>
<div class="paragraph">
<p>Once you press <b class="button">save</b> you should see logs in OpenEMS Backend</p>
</div>
<div class="paragraph">
<p><code>[ctrlBackend0] Connected to OpenEMS Backend</code></p>
</div>
<div class="paragraph">
<p>and OpenEMS Edge</p>
</div>
<div class="paragraph">
<p><code>[Edge.Websocket] Edge [edge0] connected</code></p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_connect_openems_ui_with_backend"><a class="anchor" href="#_connect_openems_ui_with_backend"></a>6.3. Connect OpenEMS UI with Backend</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Visual Studio Code open the file <code>ui/src/environments/environment.ts</code> and configure it as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">import { Environment } from "../app/shared/type/environment";

export const environment: Environment = {
  production: false,
  debugMode: true,
  url: "ws://localhost:8082",
  backend: "OpenEMS Backend",
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is again noteworthy here, that:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>"url" is set to <code>ws://localhost:8082</code>. This defines an unencrypted websocket ("ws://") connection to the local computer on port "8082" like we configured before for the Ui.Websocket.</p>
</li>
<li>
<p>"backend" is set to "OpenEMS Backend". This option is used in certain places inside OpenEMS UI that need to be treated differently for connections to OpenEMS Edge and OpenEMS Backend.</p>
</li>
</ol>
</div>
</li>
<li>
<p>In Visual Studios integrated terminal type&#8230;&#8203;</p>
<div class="paragraph">
<p><code>ng serve</code></p>
</div>
</li>
<li>
<p>Open a browser at <a href="http://localhost:4200" class="bare">http://localhost:4200</a></p>
</li>
<li>
<p>You should see again OpenEMS UI, but this time you are not asked for a login (because Metadata.Dummy does not require any) and are directly forwarded to the Energy Monitor at <code><a href="http://localhost:4200/device/edge0/index" class="bare">http://localhost:4200/device/edge0/index</a></code>. You are now seeing the data from OpenEMS Edge via OpenEMS Backend.</p>
<div class="imageblock">
<div class="content">
<img src="_images/ui-via-backend.png" alt="UI via Backend">
</div>
<div class="title">Figure 24. UI via Backend</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<h1 id="_next_steps" class="sect0"><a class="anchor" href="#_next_steps"></a>Next steps</h1>
<div class="paragraph">
<p>Now that you setup a complete development environment and have a working instance of OpenEMS Edge, OpenEMS Backend an OpenEMS UI, you can continue implementing your first device driver in OpenEMS. We provide a tutorial that explains the steps to implement an electric meter in OpenEMS Edge that is connected via Modbus/TCP. The meter itself is simulated using a small Modbus slave application, so no external hardware is required for this guide. → <a href="edge/implement.html" class="page">Implementing a Device</a></p>
</div>
</article>
  </main>
</div>
<script src="../../_/js/site.js"></script>
<script src="../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
  </body>
</html>
