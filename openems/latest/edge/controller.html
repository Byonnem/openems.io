<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controller :: Open Energy Management System</title>
    <link rel="canonical" href="https://openems.github.io/openems.io/openems/latest/edge/controller.html">
    <meta name="keywords" content="AsciiDoc">
    <meta name="generator" content="Antora 2.3.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
<link rel="icon" href="../../../_/img/feneco.ico" type="image/x-icon">
<link rel="stylesheet" href="../../../_/css/vendor/docsearch.min.css">  </head>
  <body class="article">
<header class="header">
  <nav class="navbar" color="#2d8fab">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://github.com/OpenEMS/openems">OpenEMS // Docs</a>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/OpenEMS/openems">
          <span class="gitlink">
          </span>
        </a>
      </div>
    </div>
  </nav>
</header><div class="main-wrapper">
<div class="navigation-container" data-component="openems" data-version="latest">
  <aside class="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../introduction.html">Open Energy Management System</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../gettingstarted.html">Getting Started</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../coreconcepts.html">Core concepts &amp; terminology</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">OpenEMS Edge</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nature.html">Nature</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="scheduler.html">Scheduler</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="controller.html">Controller</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bridge.html">Bridge</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="device_service.html">Device &amp; Service</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="implement.html">Implementing a Device</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="build.html">Build OpenEMS Edge</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="deploy.html">Deploy OpenEMS Edge</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">OpenEMS UI</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ui/build.html">Build OpenEMS UI</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">OpenEMS Backend</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../backend/architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../backend/configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../backend/backend-to-backend.html">Backend-to-Backend</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../backend/build.html">Build OpenEMS Backend</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../backend/deploy.html">Deploy OpenEMS Backend</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../component-communication/index.html">Component Communication</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Simulation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../simulation/realtime.html">Real-Time Simulation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../simulation/ui-history.html">UI History Simulation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../documentation.html">Documentation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../randd.html">Research and Development</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://openems.github.io/openems.io/javadoc/">Javadoc</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">Open Energy Management System</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Open Energy Management System</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../introduction.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="../introduction.html" class="home-link"></a>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="../introduction.html">Open Energy Management System</a></li>
    <li class="crumb">OpenEMS Edge</li>
    <li class="crumb"><a href="controller.html">Controller</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/OpenEMS/openems/tree/HEAD/doc/modules/ROOT/pages/edge/controller.adoc">Edit this Page</a></div>
</div>
<article class="doc">
<h1>Controller</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_api_backend">1. Api Backend</a></li>
<li><a href="#_api_modbus">2. Api Modbus</a></li>
<li><a href="#_rest_api_controller">3. REST-Api Controller</a>
<ul class="sectlevel2">
<li><a href="#_endpoint_restchannelcomponent_idchannel_id">3.1. Endpoint <code>/rest/channel/&lt;Component-ID&gt;/&lt;Channel-ID&gt;</code></a>
<ul class="sectlevel3">
<li><a href="#_get">3.1.1. GET</a></li>
<li><a href="#_post">3.1.2. POST</a></li>
</ul>
</li>
<li><a href="#_endpoint_jsonrpc">3.2. Endpoint '/jsonrpc'</a>
<ul class="sectlevel3">
<li><a href="#_getedgeconfig">3.2.1. getEdgeConfig</a></li>
<li><a href="#_componentjsonapi">3.2.2. componentJsonApi</a>
<ul class="sectlevel4">
<li><a href="#_getmodbusprotocol">3.2.2.1. getModbusProtocol</a></li>
</ul>
</li>
<li><a href="#_updatecomponentconfig">3.2.3. updateComponentConfig</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_api_websocket">4. Api Websocket</a></li>
<li><a href="#_asymmetric_balancing_cos_phi">5. Asymmetric Balancing Cos-Phi</a></li>
<li><a href="#_asymmetric_fix_active_power">6. Asymmetric Fix Active Power</a></li>
<li><a href="#_asymmetric_fix_reactive_power">7. Asymmetric Fix Reactive Power</a></li>
<li><a href="#_asymmetric_peak_shaving">8. Asymmetric Peak-Shaving</a></li>
<li><a href="#_asymmetric_phase_rectification">9. Asymmetric Phase Rectification</a></li>
<li><a href="#_channel_threshold">10. Channel-Threshold</a></li>
<li><a href="#_chp_control_via_state_of_charge_soc">11. CHP control via State-of-Charge (SoC)</a>
<ul class="sectlevel2">
<li><a href="#_configuration">11.1. Configuration</a></li>
<li><a href="#_example_configuration">11.2. Example Configuration</a></li>
</ul>
</li>
<li><a href="#_detailed_debug_log">12. Detailed Debug Log</a></li>
<li><a href="#_debug_log">13. Debug Log</a></li>
<li><a href="#_ess_ac_island">14. ESS AC-Island</a></li>
<li><a href="#_ess_delay_charge">15. ESS Delay Charge</a></li>
<li><a href="#_ess_limit_total_discharge">16. ESS Limit Total Discharge</a></li>
<li><a href="#_ess_minimum_discharge_period">17. ESS Minimum Discharge Period</a></li>
<li><a href="#_ess_one_full_cycle">18. ESS One Full Cycle</a></li>
<li><a href="#_ess_predictive_delay_charge">19. ESS Predictive Delay Charge</a></li>
<li><a href="#_ess_sell_to_grid_limit">20. ESS Sell-To-Grid Limit</a></li>
<li><a href="#_evcs">21. EVCS</a></li>
<li><a href="#_evcs_fix_active_power">22. EVCS Fix Active Power</a></li>
<li><a href="#_generic_jsonlogic">23. Generic JsonLogic</a></li>
<li><a href="#_high_load_timeslot">24. High-Load Timeslot</a></li>
<li><a href="#_io_alarm">25. IO Alarm</a>
<ul class="sectlevel2">
<li><a href="#_configuration_2">25.1. Configuration</a></li>
<li><a href="#_example_configuration_2">25.2. Example Configuration</a></li>
</ul>
</li>
<li><a href="#_io_channel_single_threshold">26. IO Channel-Single-Threshold</a></li>
<li><a href="#_io_fix_digital_output">27. IO Fix Digital Output</a></li>
<li><a href="#_io_heating_element">28. IO Heating Element</a>
<ul class="sectlevel2">
<li><a href="#_phase_and_level">28.1. Phase and Level</a></li>
<li><a href="#_channels">28.2. Channels</a></li>
</ul>
</li>
<li><a href="#_pv_inverter_fix_power_limit">29. PV-Inverter Fix Power Limit</a></li>
<li><a href="#_sell_to_grid_limit">30. Sell-To-Grid limit</a></li>
<li><a href="#_symmetric_balancing">31. Symmetric Balancing</a></li>
<li><a href="#_symmetric_balancing_schedule">32. Symmetric Balancing Schedule</a>
<ul class="sectlevel2">
<li><a href="#_1_definition_of_a_power_target_set_point_schedule">32.1. 1. Definition of a power target set-point Schedule</a></li>
<li><a href="#_2_immediate_control_of_the_power_target_set_point">32.2. 2. Immediate control of the power target set-point</a></li>
</ul>
</li>
<li><a href="#_symmetric_fix_active_power">33. Symmetric Fix Active Power</a></li>
<li><a href="#_symmetric_fix_reactive_power">34. Symmetric Fix Reactive Power</a></li>
<li><a href="#_symmetric_limit_active_power">35. Symmetric Limit Active Power</a></li>
<li><a href="#_symmetric_linear_power_band">36. Symmetric Linear Power Band</a></li>
<li><a href="#_symmetric_peak_shaving">37. Symmetric Peak-Shaving</a></li>
<li><a href="#_symmetric_random_power">38. Symmetric Random-Power</a></li>
<li><a href="#_symmetric_reactive_power_voltage_characteristics">39. Symmetric Reactive-Power Voltage-Characteristics</a></li>
<li><a href="#_symmetric_timeslot_peak_shaving">40. Symmetric Timeslot Peak-Shaving</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>A OpenEMS Edge Controller holds the actual business logic or the actual algorithm that controls hardware. The logic of each active Controller is executed regularly on every Cycle, i.e. once per second.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_api_backend"><a class="anchor" href="#_api_backend"></a>1. Api Backend</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Connects to OpenEMS Backend and sends all Channel data regularly. It is implemented as a Controller, as Channels can be written from OpenEMS Backend.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.api.backend">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_api_modbus"><a class="anchor" href="#_api_modbus"></a>2. Api Modbus</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Provides a Modbus-Slave implementation for OpenEMS Edge. It provides access to Channels from an external device via Modbus/TCP.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.api.modbus">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rest_api_controller"><a class="anchor" href="#_rest_api_controller"></a>3. REST-Api Controller</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A REST-Api for external access to OpenEMS Edge. This Controller provides access to Channels and JSON-RPC Requests from an external device via JSON/REST.</p>
</div>
<div class="paragraph">
<p>The default port for the server is <strong>8084</strong>; so the default base address for REST calls is <code><a href="http://x:&lt;PASSWORD&gt;@&lt;IP&gt;:8084/rest" class="bare">http://x:&lt;PASSWORD&gt;@&lt;IP&gt;:8084/rest</a></code>, where</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>http</code> is the protocol</p>
</li>
<li>
<p><code>x</code> is the user. Authentication in OpenEMS is via password only, so the username can be omitted.</p>
</li>
<li>
<p><code>&lt;PASSWORD&gt;</code> is the user password. If no specific settings have been made, try 'user' or 'admin' here.</p>
</li>
<li>
<p><code>8084</code> is the configured port</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A good way to test REST-Api calls is via the Chrome extension <a href="https://chrome.google.com/webstore/detail/restlet-client-rest-api-t/aejoelaoggembcahagimdiliamlcdmfm">Restlet</a></p>
</div>
<div class="paragraph">
<p>For more information find the implementation  <a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.api.rest">Source Code <span class="icon"><i class="fa fa-github"></i></span></a>.</p>
</div>
<div class="paragraph">
<p>Those are the available REST-Api endpoints:</p>
</div>
<div class="sect2">
<h3 id="_endpoint_restchannelcomponent_idchannel_id"><a class="anchor" href="#_endpoint_restchannelcomponent_idchannel_id"></a>3.1. Endpoint <code>/rest/channel/&lt;Component-ID&gt;/&lt;Channel-ID&gt;</code></h3>
<div class="ulist">
<ul>
<li>
<p><code>Component-ID</code> is the ID of the Component, e.g. "_sum", "ess0", "meter0",&#8230;&#8203;</p>
</li>
<li>
<p><code>Channel-ID</code> is the ID of the Channel, e.g. "ActivePowerL1", "Soc",&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_get"><a class="anchor" href="#_get"></a>3.1.1. GET</h4>
<div class="paragraph">
<p>Use a HTTP request with method <code>GET</code> to read the current value of a Channel.</p>
</div>
<div class="paragraph">
<p><strong>Example:</strong> To read the current state of charge of the battery, send a GET request to <a href="http://x:user@localhost:8084/rest/channel/_sum/EssSoC" class="bare">http://x:user@localhost:8084/rest/channel/_sum/EssSoC</a>. It returns a response like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>{
  "value": 50
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_post"><a class="anchor" href="#_post"></a>3.1.2. POST</h4>
<div class="paragraph">
<p>Use a HTTP request with method <code>POST</code> to write a Channel.</p>
</div>
<div class="paragraph">
<p><strong>Example:</strong> To switch a Digital-Output or Relay on, send a POST request to <a href="http://x:user@localhost:8084/rest/channel/io0/Relay1" class="bare">http://x:user@localhost:8084/rest/channel/io0/Relay1</a> with the following body:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>{
  "value": true
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_endpoint_jsonrpc"><a class="anchor" href="#_endpoint_jsonrpc"></a>3.2. Endpoint '/jsonrpc'</h3>
<div class="paragraph">
<p>This allows remote procedure calls (RPC) using JSON-RPC. The JSON-RPC commands need to be sent as <code>POST</code> requests with the specified body.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
JSON-RPC usually requires the properties 'id' and 'jsonrpc'. Those can be omitted here, as they are not required for HTTP POST calls.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Following JSON-RPC commands are available:</p>
</div>
<div class="sect3">
<h4 id="_getedgeconfig"><a class="anchor" href="#_getedgeconfig"></a>3.2.1. getEdgeConfig</h4>
<div class="paragraph">
<p>Gets the current configuration of the OpenEMS Edge.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>{
  "method": "getEdgeConfig",
  "params": {}
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_componentjsonapi"><a class="anchor" href="#_componentjsonapi"></a>3.2.2. componentJsonApi</h4>
<div class="paragraph">
<p>Forwards a JSON-RPC payload to a given Component, identified by its Component-ID.</p>
</div>
<div class="sect4">
<h5 id="_getmodbusprotocol"><a class="anchor" href="#_getmodbusprotocol"></a>3.2.2.1. getModbusProtocol</h5>
<div class="paragraph">
<p>Gets the currently active Modbus-TCP protocol definition from the Modbus-TCP-Api Controller with the ID "ctrlModbusTcp0".</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>{
  "method":"componentJsonApi",
  "params":{
    "componentId":"ctrlApiModbusTcp0",
    "payload":{
      "method":"getModbusProtocol",
      "params":{

      }
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_updatecomponentconfig"><a class="anchor" href="#_updatecomponentconfig"></a>3.2.3. updateComponentConfig</h4>
<div class="paragraph">
<p>Updates a Component configuration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>{
	"method": "updateComponentConfig",
	"params": {
		"componentId": "ctrlDebugLog0",
		"properties": [{
 			"name": "enabled",
			"value": true
		}]
	}
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_api_websocket"><a class="anchor" href="#_api_websocket"></a>4. Api Websocket</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Provides a JSON/REST implementation via HTTP Websocket for OpenEMS Edge. It provides access to Channels and JSON-RPC Requests from an external device via Websocket. This Controller is used for local connection of OpenEMS UI.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.api.websocket">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_asymmetric_balancing_cos_phi"><a class="anchor" href="#_asymmetric_balancing_cos_phi"></a>5. Asymmetric Balancing Cos-Phi</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Controls an asymmetric energy storage system in self-consumption optimization mode while keeping the grid meter on a defined cos-phi.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.asymmetric.balancingcosphi">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_asymmetric_fix_active_power"><a class="anchor" href="#_asymmetric_fix_active_power"></a>6. Asymmetric Fix Active Power</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sets a fixed active power for charging/discharging of an asymmetric energy storage system.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.asymmetric.fixactivepower">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_asymmetric_fix_reactive_power"><a class="anchor" href="#_asymmetric_fix_reactive_power"></a>7. Asymmetric Fix Reactive Power</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sets a fixed reactive power for an asymmetric energy storage system.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.asymmetric.fixreactivepower">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_asymmetric_peak_shaving"><a class="anchor" href="#_asymmetric_peak_shaving"></a>8. Asymmetric Peak-Shaving</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Applies asymmetric peak-shaving at the grid meter using a energy storage system. The controller evaluates the grid meter phase with the highest load and discharges the energy storage system accordingly to cut this power peak in order to avoid the fuse to be triggered. On low consumption periods the energy storage system recharges.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.asymmetric.peakshaving">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_asymmetric_phase_rectification"><a class="anchor" href="#_asymmetric_phase_rectification"></a>9. Asymmetric Phase Rectification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Balances the three phases at the grid using an asymmetric energy storage system.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.asymmetric.phaserectification">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_channel_threshold"><a class="anchor" href="#_channel_threshold"></a>10. Channel-Threshold</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Generic Controller that sets a digital output according to the value of given Channel - e.g. turn a Relay on, when battery state of charge is above a given threshold.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.channelthreshold">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_chp_control_via_state_of_charge_soc"><a class="anchor" href="#_chp_control_via_state_of_charge_soc"></a>11. CHP control via State-of-Charge (SoC)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Controls a CHP device. Signals the CHP to turn 'ON' when battery SoC is low; signal it to turn 'OFF' when SoC is high. This controller needs four parameters,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>State of Charge(Soc) of the ESS.</p>
</li>
<li>
<p>Low Threshold(LT) Soc</p>
</li>
<li>
<p>High Threshold(HT) Soc</p>
</li>
<li>
<p>Output channel to signal.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Soc of the Ess is compared with the LT and HT, and The following operations or state change is performed.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the Soc is less-than("&lt;") LT, signal is sent to the Output channel which eventually turns the CHP device 'ON'.</p>
</li>
<li>
<p>If the Soc is greater-than("&gt;") HT, signal is sent to the Output channel which turns the CHP device 'OFF'.</p>
</li>
<li>
<p>Any other conditions the there is no change in the State of the CHP device.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_configuration"><a class="anchor" href="#_configuration"></a>11.1. Configuration</h3>
<div class="ulist">
<ul>
<li>
<p><code>Component-ID</code> Unique ID of this Component (id), e.g. "ctrlIoAlarm0", "ctrlIoAlarm1"</p>
</li>
<li>
<p><code>Alias</code> Human-readable name of this Component; defaults to Component-ID (alias)</p>
</li>
<li>
<p><code>Input Channels</code> Addresses of the input State-Channels (inputChannelAddress), This is a array of input state channels.</p>
</li>
<li>
<p><code>Output Channel</code> Channel address of the Digital Output that should be switched (outputChannelAddress)</p>
</li>
<li>
<p><code>Low Threshold</code> Low boundary of the threshold</p>
</li>
<li>
<p><code>High Threshold</code> High boundary of the threshold</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_example_configuration"><a class="anchor" href="#_example_configuration"></a>11.2. Example Configuration</h3>
<div class="ulist">
<ul>
<li>
<p><code>Component-ID</code> : ctrlChpSoc0</p>
</li>
<li>
<p><code>Alias</code> : myChpCtrl</p>
</li>
<li>
<p><code>Input Channels</code> : _sum/EssSoc</p>
</li>
<li>
<p><code>Output Channel</code> : io0/Relay1</p>
</li>
<li>
<p><code>Low Threshold</code> 25</p>
</li>
<li>
<p><code>High Threshold</code> 75</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
_sum/EssSoc - represents the Soc channel of the ESS0,
io0/relay1 - represents the relay 1 of the relay board.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.chp.soc">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_detailed_debug_log"><a class="anchor" href="#_detailed_debug_log"></a>12. Detailed Debug Log</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Constantly shows the values of all Channels of a Component on the console. Primarily used for developing and debugging.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.debug.detailedlog">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_debug_log"><a class="anchor" href="#_debug_log"></a>13. Debug Log</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Constantly shows the most important values of all Components on the console. This is often activated by default to be able to track the running system easily.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.debug.log">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ess_ac_island"><a class="anchor" href="#_ess_ac_island"></a>14. ESS AC-Island</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Switches an AC PV inverter to the emergency power on grid outage.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.ess.acisland">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ess_delay_charge"><a class="anchor" href="#_ess_delay_charge"></a>15. ESS Delay Charge</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This Controller delays full charing of an energy storage system (ESS) to a certain hour of the day. If for example configured to delay till 4 pm, the allowed charge power is limited in a way, that 100 % State-of-Charge is reached only at 4 pm. The Controller therefor constantly watches the remaining time and remaining capacity of the ESS.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.ess.delaycharge">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ess_limit_total_discharge"><a class="anchor" href="#_ess_limit_total_discharge"></a>16. ESS Limit Total Discharge</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Limits the discharge power of an energy storage system according to its State-of-Charge, e.g. to keep energy for emergency power or to avoid deep discharge.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.ess.limittotaldischarge">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ess_minimum_discharge_period"><a class="anchor" href="#_ess_minimum_discharge_period"></a>17. ESS Minimum Discharge Period</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Provides a minimum discharge power of the storage system for a configured time period, if a certain power peak has been reached.</p>
</div>
<div class="paragraph">
<p>This can be used in some systems where the allowed charge power has been set to zero and the storage needs a minimum discharge power for a certain time, to recognize that the storage is not full and the allowed charge power should be higher.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.ess.mindischargeperiod">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ess_one_full_cycle"><a class="anchor" href="#_ess_one_full_cycle"></a>18. ESS One Full Cycle</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Executes a full charge/discharge cycle with an energy storage system. This can be used to let the Battery Management System (BMS) reset its reference points for State-of-Charge calculattion.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.ess.onefullcycle">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ess_predictive_delay_charge"><a class="anchor" href="#_ess_predictive_delay_charge"></a>19. ESS Predictive Delay Charge</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Delays the charging of the AC or DC storage system based on predicted production and consumption.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.ess.predictivedelaycharge">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ess_sell_to_grid_limit"><a class="anchor" href="#_ess_sell_to_grid_limit"></a>20. ESS Sell-To-Grid Limit</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Limits the maximum sell-to-grid power by actively charging the Ess.
Can be used to apply a 70 % limit to the sell-to-grid power according to German law.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.ess.selltogridlimit">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_evcs"><a class="anchor" href="#_evcs"></a>21. EVCS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Controls an Electric Vehicle Charging Station (EVCS) in different modes, like "Force-Charge" and "Surplus Energy Charging".</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.evcs">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_evcs_fix_active_power"><a class="anchor" href="#_evcs_fix_active_power"></a>22. EVCS Fix Active Power</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sets a fixed maximum charge power to an Electric Vehicle Charging Station (EVCS).</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.evcs.fixactivepower">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_generic_jsonlogic"><a class="anchor" href="#_generic_jsonlogic"></a>23. Generic JsonLogic</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The JsonLogic-Controller is a very generic Controller that allows the definition of a complex logic as a configuration at runtime, e.g. via Apache Felix Web Console.</p>
</div>
<div class="paragraph">
<p>It is based on the JsonLogic specification (<a href="http://jsonlogic.com">jsonlogic.com</a>). Logics can be defined by a rule:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
   "if":[
      {
         "&lt;":[
            {
               "var":"_sum/EssSoc"
            },
            50
         ]
      },
      [
         [
            "ess0/SetActivePowerEquals",
            5000
         ]
      ],
      [
         [
            "ess0/SetActivePowerEquals",
            -2000
         ]
      ]
   ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The input data that is referenced via <code>var</code> is automatically provided from OpenEMS Channels - e.g. as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
   "_sum/EssSoc": 40
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example would result in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
    "ess0/SetActivePowerEquals",
    5000
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>i.e. the Controller will require a set-point of 5000 W discharge on ess0.</p>
</div>
<div class="paragraph">
<p>It is also possible to write to multiple channels, by adding more arrays to the result.</p>
</div>
<div class="paragraph">
<p>Try yourself: <a href="http://jsonlogic.com/play.html">http://jsonlogic.com/play.html</a></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.generic.jsonlogic">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_high_load_timeslot"><a class="anchor" href="#_high_load_timeslot"></a>24. High-Load Timeslot</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Controls an energy storage system for a High-Load timeslot application (German "Hochlastzeitfenster").</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.highloadtimeslot">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_io_alarm"><a class="anchor" href="#_io_alarm"></a>25. IO Alarm</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Switches a digital output, when one or more State-Channels are set. This controller can be used to signal alarms.
This controller is used to check for the State-Channels which are boolean type, which typically represents the error channels. A specific configured digital output channel can be signaled based on the configured input State-Channels(one more channels).</p>
</div>
<div class="sect2">
<h3 id="_configuration_2"><a class="anchor" href="#_configuration_2"></a>25.1. Configuration</h3>
<div class="ulist">
<ul>
<li>
<p><code>Component-ID</code> Unique ID of this Component (id), e.g. "ctrlIoAlarm0", "ctrlIoAlarm1"</p>
</li>
<li>
<p><code>Alias</code> Human-readable name of this Component; defaults to Component-ID (alias)</p>
</li>
<li>
<p><code>Input Channels</code> Addresses of the input State-Channels (inputChannelAddress), This is a array of input state channels.</p>
</li>
<li>
<p><code>Output Channel</code> Channel address of the Digital Output that should be switched (outputChannelAddress)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Multiple instances can be created in "Apache felix" during the configuration for each Output channel signal.</p>
</div>
</div>
<div class="sect2">
<h3 id="_example_configuration_2"><a class="anchor" href="#_example_configuration_2"></a>25.2. Example Configuration</h3>
<div class="ulist">
<ul>
<li>
<p><code>Component-ID</code> : ctrlIoAlarm0</p>
</li>
<li>
<p><code>Alias</code> : myIoAlarm</p>
</li>
<li>
<p><code>Input Channels</code> : [ess0/State15, ess0/State33, ess0/State43]</p>
</li>
<li>
<p><code>Output Channel</code> : io0/Relay1</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
ess0/State15 - represents the State15 channels of the ESS0,
io0/relay1 = represents the relay 1 of the KM tronic relay board.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The above example configuration describes, if any of the configured three input channels is set to "True" then a signal "True" is sent to output channel, else the "False" signal is sent to outout channel.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.io.alarm">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_io_channel_single_threshold"><a class="anchor" href="#_io_channel_single_threshold"></a>26. IO Channel-Single-Threshold</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Generic Controller that sets a digital output according to the value of given Channel - e.g. turn a Relay on or off, when configured input channel/SoC is above or below a given threshold respectively.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.channelsinglethreshold">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_io_fix_digital_output"><a class="anchor" href="#_io_fix_digital_output"></a>27. IO Fix Digital Output</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sets a digital output statically ON or OFF.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.io.fixdigitaloutput">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_io_heating_element"><a class="anchor" href="#_io_heating_element"></a>28. IO Heating Element</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Controls a three-phase heating element via Relays, according to grid active power.</p>
</div>
<div class="sect2">
<h3 id="_phase_and_level"><a class="anchor" href="#_phase_and_level"></a>28.1. Phase and Level</h3>
<div class="paragraph">
<p>The Controller distinguishes the definition of Phase and Level.
<strong>Phase</strong> represents the electrical phase L1, L2 or L3.
<strong>Level</strong> represents how many Phases are active at one point in time:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Level 1: only Phase L1 is active</p>
</li>
<li>
<p>Level 2: Phase L1 and L2 are active</p>
</li>
<li>
<p>Level 3: all three Phases are active</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_channels"><a class="anchor" href="#_channels"></a>28.2. Channels</h3>
<div class="paragraph">
<p>Example:
* the power of the heating element per phase is 1000 W
* each "x" below represents one hour</p>
</div>
<div class="paragraph">
<p>Assume the Controller was activating Phases L1, L2 and L3 during the day like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>L3|           xxx
L2|        xxxxxxxxx
L1|     xxxxxxxxxxxxxxxx
 t|------------------------</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Channel <em>Phase1Time</em></dt>
<dd>
<p><code>= 16 h = <strong>57600 sec</strong></code></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>        |--------------|</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Channel <em>Phase2Time</em></dt>
<dd>
<p><code>= 9 hours = <strong>32400 sec</strong></code></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>           |-------|</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Channel <em>Phase3Time</em></dt>
<dd>
<p><code>= 3 hours = <strong>10800 sec</strong></code></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>              |-|</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Channel <em>Level1Time</em></dt>
<dd>
<p><code>= Phase1Time - Phase2Time = 7 hours = <strong>25200 sec</strong></code></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>        |-|         |--|</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Channel <em>Level2Time</em></dt>
<dd>
<p><code>= Phase2Time - Phase3Time = 6 hours = <strong>21600 sec</strong></code></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>           |-|   |-|</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Channel <em>Level3Time</em></dt>
<dd>
<p><code>= Phase3Time = 3 hours = <strong>10800 sec</strong></code></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>              |-|</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Channel <em>TotalTime</em></dt>
<dd>
<p><code><strong>28000 Wh</strong> = 28 kWh</code></p>
</dd>
<dt class="hdlist1">Channel <em>TotalPhaseTime</em></dt>
<dd>
<p><code>= Phase1Time + Phase2Time + Phase3Time = 16 + 9 + 3 = 28 h = <strong>100800 sec</strong></code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.io.heatingelement">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_pv_inverter_fix_power_limit"><a class="anchor" href="#_pv_inverter_fix_power_limit"></a>29. PV-Inverter Fix Power Limit</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sets a fixed power limit for PV-Inverter production.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.pvinverter.fixpowerlimit">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sell_to_grid_limit"><a class="anchor" href="#_sell_to_grid_limit"></a>30. Sell-To-Grid limit</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Dynamically limits the Sell-To-Grid power to a defined maximum power.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.selltogridlimit">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_symmetric_balancing"><a class="anchor" href="#_symmetric_balancing"></a>31. Symmetric Balancing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Controls a symmetric energy storage system in self-consumption optimization mode.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.symmetric.balancing">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_symmetric_balancing_schedule"><a class="anchor" href="#_symmetric_balancing_schedule"></a>32. Symmetric Balancing Schedule</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Controls a symmetric energy storage system in balancing mode. The control algorithm charges or discharges the battery in order to reach a given power target set-point at the grid connection point. If the target set-point is defined as zero, the behaviour is like with self-consumption optimization.</p>
</div>
<div class="paragraph">
<p>This controller allows two ways of controlling the power target set-point:</p>
</div>
<div class="sect2">
<h3 id="_1_definition_of_a_power_target_set_point_schedule"><a class="anchor" href="#_1_definition_of_a_power_target_set_point_schedule"></a>32.1. 1. Definition of a power target set-point Schedule</h3>
<div class="paragraph">
<p>The static configuration parameter "schedule" takes a Schedule of set-points as a Json-Array. An example schedule looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
	{
		"startTimestamp": 1577836800,
		"duration": 900,
		"activePowerSetPoint": 0
	}, {
		"startTimestamp": 1577837700,
		"duration": 900,
		"activePowerSetPoint": -2000
	}
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>This schedule will activate a power target set-point of zero starting at the epoch time 1577836800 (i.e. <strong>seconds</strong> since 1st January 2020 00:00:00 <strong>in timezone UTC</strong>), that lasts for 900 seconds (i.e. 15 minutes).
Afterwards - from 1577837700 - for another 900 seconds a  set-point of -2000 W (i.e. feeding 2000 W to the grid) is targeted.
After the second period passes, no more charging or discharging commands are set on the battery.</p>
</div>
<div class="paragraph">
<p>The schedule configuration parameter may be updated</p>
</div>
<div class="ulist">
<ul>
<li>
<p>via a browser using the OpenEMS user interface</p>
</li>
<li>
<p>using the <a href="https://openems.github.io/openems.io/openems/latest/backend/backend-to-backend.html#_setgridconnschedule"><code>SetGridConnSchedule</code> JSON-RPC Request via OpenEMS Backend</a></p>
</li>
<li>
<p>using a direct <a href="https://github.com/OpenEMS/openems/blob/develop/io.openems.common/src/io/openems/common/jsonrpc/request/SetGridConnScheduleRequest.java">SetGridConnScheduleRequest</a> via <a href="https://openems.github.io/openems.io/openems/latest/component-communication/index.html#_communicate_with_a_specific_edge_component">JsonApi</a></p>
</li>
<li>
<p>or using the <a href="https://github.com/OpenEMS/openems/blob/develop/ui/src/app/shared/jsonrpc/request/updateComponentConfigRequest.ts"><code>UpdateComponentConfigRequest</code> JSON-RPC Request</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Be aware that an <code>UpdateComponentConfigRequest</code> will always result in a actual configuration file being updated by Apache Felix Configuration Admin, so this command should not be used too frequently, e.g. only once per day. The <code>SetGridConnScheduleRequest</code> variant runs only in memory and is not persisted. Downside is, that if OpenEMS Edge gets restarted, the schedule is lost.</p>
</div>
</div>
<div class="sect2">
<h3 id="_2_immediate_control_of_the_power_target_set_point"><a class="anchor" href="#_2_immediate_control_of_the_power_target_set_point"></a>32.2. 2. Immediate control of the power target set-point</h3>
<div class="paragraph">
<p>The power target set-point may also be controlled directly via the <code>GridActivePowerSetPoint</code> channel. E.g. if the controller component has the Id <code>ctrlBalancingSchedule0</code> one can use e.g. the <a href="https://openems.github.io/openems.io/openems/latest/edge/controller.html#_rest_api_controller">REST-Api Controller</a> and write</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
	"value": 5000
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>to the channel <code>ctrlBalancingSchedule0/GridActivePowerSetPoint</code> (e.g. ` <a href="http://x:user@localhost:8084/rest/channel/ctrlBalancingSchedule0/GridActivePowerSetPoint`" class="bare">http://x:user@localhost:8084/rest/channel/ctrlBalancingSchedule0/GridActivePowerSetPoint`</a>), to set a temporary power target set-point of 5000.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.symmetric.balancingschedule">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_symmetric_fix_active_power"><a class="anchor" href="#_symmetric_fix_active_power"></a>33. Symmetric Fix Active Power</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sets a fixed active power for charging/discharging of a symmetric energy storage system.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.symmetric.fixactivepower">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_symmetric_fix_reactive_power"><a class="anchor" href="#_symmetric_fix_reactive_power"></a>34. Symmetric Fix Reactive Power</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sets a fixed reactive power for a symmetric energy storage system.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.symmetric.fixreactivepower">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_symmetric_limit_active_power"><a class="anchor" href="#_symmetric_limit_active_power"></a>35. Symmetric Limit Active Power</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Limits the allowed active power for charging and discharging of a symmetric energy storage system.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.symmetric.limitactivepower">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_symmetric_linear_power_band"><a class="anchor" href="#_symmetric_linear_power_band"></a>36. Symmetric Linear Power Band</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Executes a test cycle for a symmetric energy storage system by increasing and decreasing the charging/discharging power in given limits.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.symmetric.linearpowerband">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_symmetric_peak_shaving"><a class="anchor" href="#_symmetric_peak_shaving"></a>37. Symmetric Peak-Shaving</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Applies peak-shaving at the grid using a symmetric energy storage system.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.symmetric.peakshaving">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_symmetric_random_power"><a class="anchor" href="#_symmetric_random_power"></a>38. Symmetric Random-Power</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Applies random charging/discharging of a symmetric energy storage system for performance tests.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.symmetric.randompower">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_symmetric_reactive_power_voltage_characteristics"><a class="anchor" href="#_symmetric_reactive_power_voltage_characteristics"></a>39. Symmetric Reactive-Power Voltage-Characteristics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Controls a symmetric energy storage system using a Q-by-U reference function.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.symmetric.reactivepowervoltagecharacteristic">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_symmetric_timeslot_peak_shaving"><a class="anchor" href="#_symmetric_timeslot_peak_shaving"></a>40. Symmetric Timeslot Peak-Shaving</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Applies peak-shaving within a configured timeslot at the grid using a symmetric energy storage system. Outside of the timeslot the battery recharges.</p>
</div>
<div class="paragraph">
<p>This Controller can be used for "Atypische Netznutzung" applications in Germany, e.g. "Hochlastzeitfenster".</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OpenEMS/openems/tree/develop/io.openems.edge.controller.symmetric.timeslotpeakshaving">Source Code <span class="icon"><i class="fa fa-github"></i></span></a></p>
</div>
</div>
</div>
</article>
  </main>
</div>
<script src="../../../_/js/site.js"></script>
<script src="../../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
  </body>
</html>
