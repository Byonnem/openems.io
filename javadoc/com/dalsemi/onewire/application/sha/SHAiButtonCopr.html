<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>SHAiButtonCopr (OpenEMS Javadoc)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../jquery/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="../../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="SHAiButtonCopr (OpenEMS Javadoc)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":9,"i27":10,"i28":10,"i29":10,"i30":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.dalsemi.onewire.application.sha</a></div>
<h2 title="Class SHAiButtonCopr" class="title">Class SHAiButtonCopr</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.dalsemi.onewire.application.sha.SHAiButtonCopr</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="SHAiButtonCoprVM.html" title="class in com.dalsemi.onewire.application.sha">SHAiButtonCoprVM</a></code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">SHAiButtonCopr</span>
extends java.lang.Object</pre>
<div class="block"><P>
 Class for holding instances of SHA iButton Coprocessors involved in SHA
 Transactions. The Coprocessor is used for digitally signing transaction data
 as well as generating random challenges for users and verifying their
 response.
 </P>

 <p>
 A DS1963S SHA iButton can be a <code>SHAiButtonCopr</code> or a
 <code>SHAiButtonUser</code>. A Coprocessor iButton verifiessignatures and
 signs data for User iButtons. A Coprocessor might be located inside a vending
 machine, where a person would bring their User iButton. When the User iButton
 is pressed to the Blue Dot to perform a transaction, the Coprocessor would
 first verify that this button belongs to the system, i.e. that it knows the
 same authentication secret (example: a Visa terminal making sure the iButton
 had a Visa account installed). Then the Coprocessor would verify the signed
 data, probably money, to make sure it was valid. If someone tried to
 overwrite the money file, even with a previously valid money file (an attempt
 to 'restore' a previous amount of money), the signed file would be invalid
 because the signature includes the write cycle counter, which is incremented
 every time a page is written to. The write cycle counter is read-only and
 does not roll over, so the previous amount of money could not be restored by
 rolling the write counter. The Coprocessor verifies the money, then signs a
 new data file that contains the new amount of money.
 </p>

 <p>
 There are two secrets involved with the transaction process. The first secret
 is the authentication secret. It is used to validate a User iButton to a
 system. The Coprocessor iButton has the system authentication secret
 installed. On User iButtons, the system authentication secret is merged with
 binding data and the unique address of the User iButton to create a unique
 device authentication secret. The second secret is a signing secret. This
 secret only exists on the Coprocessor iButton, and is used to sign and verify
 transaction data (i.e. money). These secrets are inaccessible outside the
 iButton. Once they are installed, they cannot be retrieved.
 </p>

 <p>
 This class makes use of several performance enhancements for TINI. For
 instance, most methods are <code>synchronized</code> to access instance
 variable byte arrays rather than creating new byte arrays every time a
 transaction is performed. This could hurt performance in multi-threaded
 applications, but the usefulness of having several threads contending to talk
 to a single iButton is questionable since the methods in
 <code>com.dalsemi.onewire.adapter.DSPortAdapter</code>
 <code>beginExclusive(boolean)</code> and <code>endExclusive()</code> should
 be used.
 </p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="SHATransaction.html" title="class in com.dalsemi.onewire.application.sha"><code>SHATransaction</code></a>, 
<a href="SHAiButtonUser.html" title="class in com.dalsemi.onewire.application.sha"><code>SHAiButtonUser</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#address">address</a></span></code></th>
<td class="colLast">
<div class="block">Cache of 1-Wire Address</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#authPageNumber">authPageNumber</a></span></code></th>
<td class="colLast">
<div class="block">Page used for generating user authentication secret.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#auxData">auxData</a></span></code></th>
<td class="colLast">
<div class="block">Any auxiliary data stored on this coprocessor</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#BIND_SECRET_FAILED">BIND_SECRET_FAILED</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#bindCode">bindCode</a></span></code></th>
<td class="colLast">
<div class="block">7 bytes of binding data for scratchpad to bind secret installation</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#bindData">bindData</a></span></code></th>
<td class="colLast">
<div class="block">32 bytes of binding data to bind secret installation</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#COPY_SCRATCHPAD_FAILED">COPY_SCRATCHPAD_FAILED</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#DS1961Scompatible">DS1961Scompatible</a></span></code></th>
<td class="colLast">
<div class="block">Specifies whether or not this coprocessor is compatible with the DS1961S.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#encCode">encCode</a></span></code></th>
<td class="colLast">
<div class="block">Code used to specify encryption type.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ERASE_SCRATCHPAD_FAILED">ERASE_SCRATCHPAD_FAILED</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#filename">filename</a></span></code></th>
<td class="colLast">
<div class="block">Filename, including extension, for user's service file</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../container/OneWireContainer18.html" title="class in com.dalsemi.onewire.container">OneWireContainer18</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ibc">ibc</a></span></code></th>
<td class="colLast">
<div class="block">Reference to the OneWireContainer</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#initialSignature">initialSignature</a></span></code></th>
<td class="colLast">
<div class="block">20 byte initial signature, used for signing user account data</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#lastError">lastError</a></span></code></th>
<td class="colLast">
<div class="block">Last error code raised</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#MATCH_SCRATCHPAD_FAILED">MATCH_SCRATCHPAD_FAILED</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#NO_ERROR">NO_ERROR</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#providerName">providerName</a></span></code></th>
<td class="colLast">
<div class="block">The Provider name of the coprocessor's service</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#SHA_FUNCTION_FAILED">SHA_FUNCTION_FAILED</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#signingChallenge">signingChallenge</a></span></code></th>
<td class="colLast">
<div class="block">3 byte challenge, used for signing user account data</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#signPageNumber">signPageNumber</a></span></code></th>
<td class="colLast">
<div class="block">Page used for signing user account data.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#version">version</a></span></code></th>
<td class="colLast">
<div class="block">Code used to specify encryption type.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#WRITE_DATA_PAGE_FAILED">WRITE_DATA_PAGE_FAILED</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#WRITE_SCRATCHPAD_FAILED">WRITE_SCRATCHPAD_FAILED</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#wspcPageNumber">wspcPageNumber</a></span></code></th>
<td class="colLast">
<div class="block">Page used for generating user's validation MAC.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colSecond" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E()">SHAiButtonCopr</a></span>()</code></th>
<td class="colLast">
<div class="block">
 No default construct for user apps.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>&nbsp;</code></td>
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(com.dalsemi.onewire.container.OneWireContainer18,java.lang.String)">SHAiButtonCopr</a></span>&#8203;(<a href="../../container/OneWireContainer18.html" title="class in com.dalsemi.onewire.container">OneWireContainer18</a>&nbsp;owc,
              java.lang.String&nbsp;coprFilename)</code></th>
<td class="colLast">
<div class="block">
 Sets up this coprocessor object based on the contents of the file
 <code>coprFilename</code> stored on <code>owc</code>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>&nbsp;</code></td>
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(com.dalsemi.onewire.container.OneWireContainer18,java.lang.String,boolean,int,int,int,int,int,byte,byte%5B%5D,byte%5B%5D,byte%5B%5D,byte%5B%5D,byte%5B%5D,byte%5B%5D,byte%5B%5D,byte%5B%5D,byte%5B%5D)">SHAiButtonCopr</a></span>&#8203;(<a href="../../container/OneWireContainer18.html" title="class in com.dalsemi.onewire.container">OneWireContainer18</a>&nbsp;l_owc,
              java.lang.String&nbsp;coprFilename,
              boolean&nbsp;l_formatDevice,
              int&nbsp;l_signPageNumber,
              int&nbsp;l_authPageNumber,
              int&nbsp;l_wspcPageNumber,
              int&nbsp;l_version,
              int&nbsp;l_encCode,
              byte&nbsp;l_serviceFileExt,
              byte[]&nbsp;l_serviceFilename,
              byte[]&nbsp;l_providerName,
              byte[]&nbsp;l_bindData,
              byte[]&nbsp;l_bindCode,
              byte[]&nbsp;l_auxData,
              byte[]&nbsp;l_initialSignature,
              byte[]&nbsp;l_signingChlg,
              byte[]&nbsp;l_signingSecret,
              byte[]&nbsp;l_authSecret)</code></th>
<td class="colLast">
<div class="block">
 Sets up this coprocessor object based on the provided parameters and saves
 all of these parameters as the contents of the file <code>coprFilename</code>
 stored on <code>owc</code>.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createDataSignature(byte%5B%5D,byte%5B%5D,byte%5B%5D,int)">createDataSignature</a></span>&#8203;(byte[]&nbsp;accountData,
                   byte[]&nbsp;signScratchpad,
                   byte[]&nbsp;mac_buffer,
                   int&nbsp;macStart)</code></th>
<td class="colLast">
<div class="block">
 Given a 32-byte array for page data and a 32-byte array for scratchpad
 content, this function will create a 20-byte signature for the data based on
 SHA-1.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createDataSignatureAuth(byte%5B%5D,byte%5B%5D,byte%5B%5D,int,byte%5B%5D)">createDataSignatureAuth</a></span>&#8203;(byte[]&nbsp;accountData,
                       byte[]&nbsp;signScratchpad,
                       byte[]&nbsp;mac_buffer,
                       int&nbsp;macStart,
                       byte[]&nbsp;fullBindCode)</code></th>
<td class="colLast">
<div class="block">
 Creates a data signature, but instead of using the signing secret, it uses
 the authentication secret, bound for a particular button.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#fromStream(java.io.InputStream)">fromStream</a></span>&#8203;(java.io.InputStream&nbsp;is)</code></th>
<td class="colLast">
<div class="block">Configuration helper.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#generateChallenge(int,byte%5B%5D,int)">generateChallenge</a></span>&#8203;(int&nbsp;offset,
                 byte[]&nbsp;ch,
                 int&nbsp;start)</code></th>
<td class="colLast">
<div class="block">
 Generates a 3 byte random challenge in the iButton, sufficient to be used as
 a challenge to be answered by a User iButton.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getAddress()">getAddress</a></span>()</code></th>
<td class="colLast">
<div class="block">
 Returns the 8 byte address of the OneWireContainer this SHAiButton refers to.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getAddress(byte%5B%5D,int)">getAddress</a></span>&#8203;(byte[]&nbsp;data,
          int&nbsp;offset)</code></th>
<td class="colLast">
<div class="block">
 Copies the 8 byte address of the OneWireContainer into the provided array
 starting at the given offset.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getAddress(byte%5B%5D,int,int)">getAddress</a></span>&#8203;(byte[]&nbsp;data,
          int&nbsp;offset,
          int&nbsp;cnt)</code></th>
<td class="colLast">
<div class="block">
 Copies the specified number of bytes from the address of the OneWireContainer
 into the provided array starting at the given offset.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getAuthenticationPageNumber()">getAuthenticationPageNumber</a></span>()</code></th>
<td class="colLast">
<div class="block">
 Returns the page number used by this coprocessor for storing system
 authentication secret and recreating user's authentication secret.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getAuxilliaryData()">getAuxilliaryData</a></span>()</code></th>
<td class="colLast">
<div class="block">
 Returns a string representing the auxiliary data associated with this
 coprocessor's service.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getBindCode()">getBindCode</a></span>()</code></th>
<td class="colLast">
<div class="block">
 Returns 7 byte binding code for finalizing secret installation on user
 buttons.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getBindCode(byte%5B%5D,int)">getBindCode</a></span>&#8203;(byte[]&nbsp;data,
           int&nbsp;offset)</code></th>
<td class="colLast">
<div class="block">
 Copies 7 byte binding code for finalizing secret installation on user
 buttons.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getBindData()">getBindData</a></span>()</code></th>
<td class="colLast">
<div class="block">
 Returns 32 byte binding data for finalizing secret installation on user
 buttons.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getBindData(byte%5B%5D,int)">getBindData</a></span>&#8203;(byte[]&nbsp;data,
           int&nbsp;offset)</code></th>
<td class="colLast">
<div class="block">
 Copies 32 byte binding data for finalizing secret installation on user
 buttons.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getEncryptionCode()">getEncryptionCode</a></span>()</code></th>
<td class="colLast">
<div class="block">
 Returns an integer representing the encryption code for this coprocessor.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getFilename(byte%5B%5D,int)">getFilename</a></span>&#8203;(byte[]&nbsp;l_filename,
           int&nbsp;offset)</code></th>
<td class="colLast">
<div class="block">
 Copies the filename (used for storing account data on user buttons) into the
 specified array starting at the specified offset.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>byte</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getFilenameExt()">getFilenameExt</a></span>()</code></th>
<td class="colLast">
<div class="block">
 Returns the extension of the filename used for storing account data on user
 buttons.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getInitialSignature()">getInitialSignature</a></span>()</code></th>
<td class="colLast">
<div class="block">
 Returns the 20-byte initial signature used by this coprocessor for signing
 account data.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getInitialSignature(byte%5B%5D,int)">getInitialSignature</a></span>&#8203;(byte[]&nbsp;data,
                   int&nbsp;offset)</code></th>
<td class="colLast">
<div class="block">
 Copies the 20-byte initial signature used by this coprocessor for signing
 account data into the specified array starting at the specified offset.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLastError()">getLastError</a></span>()</code></th>
<td class="colLast">
<div class="block">
 Returns error code matching last error encountered by the coprocessor.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getProviderName()">getProviderName</a></span>()</code></th>
<td class="colLast">
<div class="block">
 Returns a string representing the Provider name associated with this
 coprocessor's service.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSigningChallenge()">getSigningChallenge</a></span>()</code></th>
<td class="colLast">
<div class="block">
 Returns the 3-byte signing challenge used by this coprocessor for data
 validation.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSigningChallenge(byte%5B%5D,int)">getSigningChallenge</a></span>&#8203;(byte[]&nbsp;data,
                   int&nbsp;offset)</code></th>
<td class="colLast">
<div class="block">
 Copies the 3-byte signing challenge used by this coprocessor for data
 validation into the specified array starting at the specified offset.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSigningPageNumber()">getSigningPageNumber</a></span>()</code></th>
<td class="colLast">
<div class="block">
 Returns the page number used by this coprocessor for signing account data.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getVersion()">getVersion</a></span>()</code></th>
<td class="colLast">
<div class="block">
 Returns the version number of this service.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getWorkspacePageNumber()">getWorkspacePageNumber</a></span>()</code></th>
<td class="colLast">
<div class="block">
 Returns the page number used by this coprocessor for regenerating the user
 authentication.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isDS1961Scompatible()">isDS1961Scompatible</a></span>()</code></th>
<td class="colLast">
<div class="block">
 Returns a boolean indicating whether or not this coprocessor's secret's were
 formatted for compatibility with the DS1961S.</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>static byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#reformatFor1961S(byte%5B%5D)">reformatFor1961S</a></span>&#8203;(byte[]&nbsp;auth_secret)</code></th>
<td class="colLast">
<div class="block">
 Static method that reformats the inputted authentication secret so it is
 compatible with the DS1961S.</div>
</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#toStream(java.io.OutputStream)">toStream</a></span>&#8203;(java.io.OutputStream&nbsp;os)</code></th>
<td class="colLast">
<div class="block">Configuration saving method.</div>
</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#toString()">toString</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns a string representing the 1-Wire address of this SHAiButton.</div>
</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#verifyAuthentication(byte%5B%5D,byte%5B%5D,byte%5B%5D,byte%5B%5D,byte)">verifyAuthentication</a></span>&#8203;(byte[]&nbsp;fullBindCode,
                    byte[]&nbsp;pageData,
                    byte[]&nbsp;scratchpad,
                    byte[]&nbsp;verify_mac,
                    byte&nbsp;authCmd)</code></th>
<td class="colLast">
<div class="block">
 Determines if a <code>SHAiButtonUser</code> belongs to the system defined by
 this Coprocessor iButton.See the usage example in this class for initializing
 a Coprocessor iButton.</div>
</td>
</tr>
<tr id="i30" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#verifySignature(byte%5B%5D,byte%5B%5D,byte%5B%5D)">verifySignature</a></span>&#8203;(byte[]&nbsp;pageData,
               byte[]&nbsp;scratchpad,
               byte[]&nbsp;verify_mac)</code></th>
<td class="colLast">
<div class="block">
 Verifies a User iButton's signed data on this Coprocessor iButton.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="NO_ERROR">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NO_ERROR</h4>
<pre>public static final&nbsp;int NO_ERROR</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#com.dalsemi.onewire.application.sha.SHAiButtonCopr.NO_ERROR">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="WRITE_DATA_PAGE_FAILED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>WRITE_DATA_PAGE_FAILED</h4>
<pre>public static final&nbsp;int WRITE_DATA_PAGE_FAILED</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#com.dalsemi.onewire.application.sha.SHAiButtonCopr.WRITE_DATA_PAGE_FAILED">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="WRITE_SCRATCHPAD_FAILED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>WRITE_SCRATCHPAD_FAILED</h4>
<pre>public static final&nbsp;int WRITE_SCRATCHPAD_FAILED</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#com.dalsemi.onewire.application.sha.SHAiButtonCopr.WRITE_SCRATCHPAD_FAILED">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="MATCH_SCRATCHPAD_FAILED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MATCH_SCRATCHPAD_FAILED</h4>
<pre>public static final&nbsp;int MATCH_SCRATCHPAD_FAILED</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#com.dalsemi.onewire.application.sha.SHAiButtonCopr.MATCH_SCRATCHPAD_FAILED">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="ERASE_SCRATCHPAD_FAILED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ERASE_SCRATCHPAD_FAILED</h4>
<pre>public static final&nbsp;int ERASE_SCRATCHPAD_FAILED</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#com.dalsemi.onewire.application.sha.SHAiButtonCopr.ERASE_SCRATCHPAD_FAILED">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="COPY_SCRATCHPAD_FAILED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>COPY_SCRATCHPAD_FAILED</h4>
<pre>public static final&nbsp;int COPY_SCRATCHPAD_FAILED</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#com.dalsemi.onewire.application.sha.SHAiButtonCopr.COPY_SCRATCHPAD_FAILED">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="SHA_FUNCTION_FAILED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SHA_FUNCTION_FAILED</h4>
<pre>public static final&nbsp;int SHA_FUNCTION_FAILED</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#com.dalsemi.onewire.application.sha.SHAiButtonCopr.SHA_FUNCTION_FAILED">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="BIND_SECRET_FAILED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BIND_SECRET_FAILED</h4>
<pre>public static final&nbsp;int BIND_SECRET_FAILED</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#com.dalsemi.onewire.application.sha.SHAiButtonCopr.BIND_SECRET_FAILED">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="lastError">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastError</h4>
<pre>protected&nbsp;int lastError</pre>
<div class="block">Last error code raised</div>
</li>
</ul>
<a id="ibc">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ibc</h4>
<pre>protected&nbsp;<a href="../../container/OneWireContainer18.html" title="class in com.dalsemi.onewire.container">OneWireContainer18</a> ibc</pre>
<div class="block">Reference to the OneWireContainer</div>
</li>
</ul>
<a id="address">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>address</h4>
<pre>protected&nbsp;byte[] address</pre>
<div class="block">Cache of 1-Wire Address</div>
</li>
</ul>
<a id="authPageNumber">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>authPageNumber</h4>
<pre>protected&nbsp;int authPageNumber</pre>
<div class="block">Page used for generating user authentication secret.</div>
</li>
</ul>
<a id="auxData">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>auxData</h4>
<pre>protected&nbsp;java.lang.String auxData</pre>
<div class="block">Any auxiliary data stored on this coprocessor</div>
</li>
</ul>
<a id="bindCode">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bindCode</h4>
<pre>protected&nbsp;byte[] bindCode</pre>
<div class="block">7 bytes of binding data for scratchpad to bind secret installation</div>
</li>
</ul>
<a id="bindData">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bindData</h4>
<pre>protected&nbsp;byte[] bindData</pre>
<div class="block">32 bytes of binding data to bind secret installation</div>
</li>
</ul>
<a id="DS1961Scompatible">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DS1961Scompatible</h4>
<pre>protected&nbsp;boolean DS1961Scompatible</pre>
<div class="block">Specifies whether or not this coprocessor is compatible with the DS1961S.
 This entails the use of a specifically padded authentication secret.</div>
</li>
</ul>
<a id="encCode">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>encCode</h4>
<pre>protected&nbsp;int encCode</pre>
<div class="block">Code used to specify encryption type.</div>
</li>
</ul>
<a id="filename">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>filename</h4>
<pre>protected&nbsp;byte[] filename</pre>
<div class="block">Filename, including extension, for user's service file</div>
</li>
</ul>
<a id="initialSignature">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialSignature</h4>
<pre>protected&nbsp;byte[] initialSignature</pre>
<div class="block">20 byte initial signature, used for signing user account data</div>
</li>
</ul>
<a id="providerName">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>providerName</h4>
<pre>protected&nbsp;java.lang.String providerName</pre>
<div class="block">The Provider name of the coprocessor's service</div>
</li>
</ul>
<a id="signingChallenge">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>signingChallenge</h4>
<pre>protected&nbsp;byte[] signingChallenge</pre>
<div class="block">3 byte challenge, used for signing user account data</div>
</li>
</ul>
<a id="signPageNumber">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>signPageNumber</h4>
<pre>protected&nbsp;int signPageNumber</pre>
<div class="block">Page used for signing user account data.</div>
</li>
</ul>
<a id="version">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>version</h4>
<pre>protected&nbsp;int version</pre>
<div class="block">Code used to specify encryption type.</div>
</li>
</ul>
<a id="wspcPageNumber">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>wspcPageNumber</h4>
<pre>protected&nbsp;int wspcPageNumber</pre>
<div class="block">Page used for generating user's validation MAC.</div>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SHAiButtonCopr</h4>
<pre>protected&nbsp;SHAiButtonCopr()</pre>
<div class="block"><p>
 No default construct for user apps. Coprocessors, unlike users, are immutable
 classes, so there is no <code>setiButton</code> for User applications.
 </p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#%3Cinit%3E(com.dalsemi.onewire.container.OneWireContainer18,java.lang.String,boolean,int,int,int,int,int,byte,byte%5B%5D,byte%5B%5D,byte%5B%5D,byte%5B%5D,byte%5B%5D,byte%5B%5D,byte%5B%5D,byte%5B%5D,byte%5B%5D)"><code>SHAiButtonCopr(OneWireContainer18,String,boolean,int,int,int,int,int,byte,byte[],byte[],byte[],byte[],byte[],byte[],byte[],byte[],byte[])</code></a>, 
<a href="#%3Cinit%3E(com.dalsemi.onewire.container.OneWireContainer18,java.lang.String)"><code>SHAiButtonCopr(OneWireContainer18,String)</code></a></dd>
</dl>
</li>
</ul>
<a id="&lt;init&gt;(com.dalsemi.onewire.container.OneWireContainer18,java.lang.String,boolean,int,int,int,int,int,byte,byte[],byte[],byte[],byte[],byte[],byte[],byte[],byte[],byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SHAiButtonCopr</h4>
<pre>public&nbsp;SHAiButtonCopr&#8203;(<a href="../../container/OneWireContainer18.html" title="class in com.dalsemi.onewire.container">OneWireContainer18</a>&nbsp;l_owc,
                      java.lang.String&nbsp;coprFilename,
                      boolean&nbsp;l_formatDevice,
                      int&nbsp;l_signPageNumber,
                      int&nbsp;l_authPageNumber,
                      int&nbsp;l_wspcPageNumber,
                      int&nbsp;l_version,
                      int&nbsp;l_encCode,
                      byte&nbsp;l_serviceFileExt,
                      byte[]&nbsp;l_serviceFilename,
                      byte[]&nbsp;l_providerName,
                      byte[]&nbsp;l_bindData,
                      byte[]&nbsp;l_bindCode,
                      byte[]&nbsp;l_auxData,
                      byte[]&nbsp;l_initialSignature,
                      byte[]&nbsp;l_signingChlg,
                      byte[]&nbsp;l_signingSecret,
                      byte[]&nbsp;l_authSecret)
               throws <a href="../../OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a>,
                      <a href="../../adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a></pre>
<div class="block"><P>
 Sets up this coprocessor object based on the provided parameters and saves
 all of these parameters as the contents of the file <code>coprFilename</code>
 stored on <code>owc</code>. Then, the system secret and authentication secret
 are installed on the coprocessor button.
 </P>

 <P>
 For the proper format of the coprocessor data file, see the document entitled
 "Implementing Secured D-Identification and E-Payment Applications using SHA
 iButtons". For the format of TMEX file structures, see Application Note 114.
 </P></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>l_owc</code> - The DS1963S used as a coprocessor.</dd>
<dd><code>coprFilename</code> - The TMEX filename where coprocessor configuration
                           data is stored. Usually, "COPR.0".</dd>
<dd><code>l_formatDevice</code> - boolean indicating whether or not the TMEX
                           filesystem of this device should be formatted
                           before the coprocessor data file is stored.</dd>
<dd><code>l_signPageNumber</code> - page number used for signing user account data.
                           (Should be page 8, but page 0 is acceptable if you
                           don't need the TMEX directory structure)</dd>
<dd><code>l_authPageNumber</code> - page number used for recreating user secret.</dd>
<dd><code>l_wspcPageNumber</code> - page number used for storing user secret and
                           recreating authentication MAC.</dd>
<dd><code>l_version</code> - version of the service provided by this
                           coprocessor.</dd>
<dd><code>l_encCode</code> - refers to a type of encryption used for user
                           account data stored on user buttons.</dd>
<dd><code>l_serviceFileExt</code> - the file extension used for the service file. (An
                           extension of decimal 102 is reserved for Money
                           files).</dd>
<dd><code>l_serviceFilename</code> - the 4-byte name of the user's account data file.</dd>
<dd><code>l_providerName</code> - the name of the provider of this service</dd>
<dd><code>l_bindData</code> - the binding data used to finalize secret
                           installation on user buttons.</dd>
<dd><code>l_bindCode</code> - the binding code used to finalize secret
                           installation on user buttons.</dd>
<dd><code>l_auxData</code> - any auxiliary or miscellaneous data to be stored on
                           the coprocessor.</dd>
<dd><code>l_initialSignature</code> - the 20-byte initial MAC placed in user account data
                           before generating actual MAC.</dd>
<dd><code>l_signingChlg</code> - the 3-byte challenge used for signing user account
                           data.</dd>
<dd><code>l_signingSecret</code> - the system signing secret used by the service being
                           installed on this coprocessor.</dd>
<dd><code>l_authSecret</code> - the system authentication secret used by the
                           service being installed on this coprocessor.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a></code> - on a 1-Wire communication error such as reading an
                            incorrect CRC from a 1-Wire device. This could be
                            caused by a physical interruption in the 1-Wire
                            Network due to shorts or a newly arriving 1-Wire
                            device issuing a 'presence pulse'.</dd>
<dd><code><a href="../../OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a></code> - on a communication or setup error with the 1-Wire
                            adapter</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#%3Cinit%3E(com.dalsemi.onewire.container.OneWireContainer18,java.lang.String)"><code>SHAiButtonCopr(OneWireContainer18,String)</code></a></dd>
</dl>
</li>
</ul>
<a id="&lt;init&gt;(com.dalsemi.onewire.container.OneWireContainer18,java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SHAiButtonCopr</h4>
<pre>public&nbsp;SHAiButtonCopr&#8203;(<a href="../../container/OneWireContainer18.html" title="class in com.dalsemi.onewire.container">OneWireContainer18</a>&nbsp;owc,
                      java.lang.String&nbsp;coprFilename)
               throws <a href="../../OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a>,
                      <a href="../../adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a></pre>
<div class="block"><P>
 Sets up this coprocessor object based on the contents of the file
 <code>coprFilename</code> stored on <code>owc</code>. This sets all the
 properties of the object as a consequence of what's in the coprocessor file.
 </P>

 <P>
 For the proper format of the coprocessor data file, see the document entitled
 "Implementing Secured D-Identification and E-Payment Applications using SHA
 iButtons". For the format of TMEX file structures, see Application Note 114.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>owc</code> - The DS1963S used as a coprocessor</dd>
<dd><code>coprFilename</code> - The TMEX filename where coprocessor configuration data is
                     stored. Usually, "COPR.0".</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a></code> - on a 1-Wire communication error such as reading an
                            incorrect CRC from a 1-Wire device. This could be
                            caused by a physical interruption in the 1-Wire
                            Network due to shorts or a newly arriving 1-Wire
                            device issuing a 'presence pulse'.</dd>
<dd><code><a href="../../OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a></code> - on a communication or setup error with the 1-Wire
                            adapter</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#%3Cinit%3E(com.dalsemi.onewire.container.OneWireContainer18,java.lang.String,boolean,int,int,int,int,int,byte,byte%5B%5D,byte%5B%5D,byte%5B%5D,byte%5B%5D,byte%5B%5D,byte%5B%5D,byte%5B%5D,byte%5B%5D,byte%5B%5D)"><code>SHAiButtonCopr(OneWireContainer18,String,boolean,int,int,int,int,int,byte,byte[],byte[],byte[],byte[],byte[],byte[],byte[],byte[],byte[])</code></a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="getAddress()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAddress</h4>
<pre class="methodSignature">public&nbsp;byte[]&nbsp;getAddress()</pre>
<div class="block"><P>
 Returns the 8 byte address of the OneWireContainer this SHAiButton refers to.
 </P></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>8 byte array containing family code, address, and crc8 of the OneWire
         device.</dd>
</dl>
</li>
</ul>
<a id="getAddress(byte[],int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAddress</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;getAddress&#8203;(byte[]&nbsp;data,
                       int&nbsp;offset)</pre>
<div class="block"><P>
 Copies the 8 byte address of the OneWireContainer into the provided array
 starting at the given offset.
 </P></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>data</code> - array with at least 8 bytes after offset</dd>
<dd><code>offset</code> - the index at which copying starts</dd>
</dl>
</li>
</ul>
<a id="getAddress(byte[],int,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAddress</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;getAddress&#8203;(byte[]&nbsp;data,
                       int&nbsp;offset,
                       int&nbsp;cnt)</pre>
<div class="block"><P>
 Copies the specified number of bytes from the address of the OneWireContainer
 into the provided array starting at the given offset.
 </P></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>data</code> - array with at least cnt bytes after offset</dd>
<dd><code>offset</code> - the index at which copying starts</dd>
<dd><code>cnt</code> - the number of bytes to copy</dd>
</dl>
</li>
</ul>
<a id="getAuthenticationPageNumber()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAuthenticationPageNumber</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;getAuthenticationPageNumber()</pre>
<div class="block"><P>
 Returns the page number used by this coprocessor for storing system
 authentication secret and recreating user's authentication secret. The
 authentication secret stays constant, while the new secret is copied on to
 the secret corresponding to the workspace page.
 </P></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>page number used for system authentication secret</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../container/OneWireContainer18.html#bindSecretToiButton(int,byte%5B%5D,byte%5B%5D,int)"><code>OneWireContainer18.bindSecretToiButton(int,byte[],byte[],int)</code></a></dd>
</dl>
</li>
</ul>
<a id="getAuxilliaryData()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAuxilliaryData</h4>
<pre class="methodSignature">public&nbsp;java.lang.String&nbsp;getAuxilliaryData()</pre>
<div class="block"><P>
 Returns a string representing the auxiliary data associated with this
 coprocessor's service.
 </P></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the auxiliary data of this coprocessor's service</dd>
</dl>
</li>
</ul>
<a id="getBindCode()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBindCode</h4>
<pre class="methodSignature">public&nbsp;byte[]&nbsp;getBindCode()</pre>
<div class="block"><P>
 Returns 7 byte binding code for finalizing secret installation on user
 buttons. This is copied into the user's scratchpad, along with 8 other bytes
 of binding data (see <code>bindSecretToiButton</code>) for finalizing the
 secret and making it unique to the button.
 </P></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the binding code for user's scratchpad</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../container/OneWireContainer18.html#bindSecretToiButton(int,byte%5B%5D,byte%5B%5D,int)"><code>OneWireContainer18.bindSecretToiButton(int,byte[],byte[],int)</code></a></dd>
</dl>
</li>
</ul>
<a id="getBindCode(byte[],int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBindCode</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;getBindCode&#8203;(byte[]&nbsp;data,
                        int&nbsp;offset)</pre>
<div class="block"><P>
 Copies 7 byte binding code for finalizing secret installation on user
 buttons. This is copied into the user's scratchpad, along with 8 other bytes
 of binding data (see <code>bindSecretToiButton</code>) for finalizing the
 secret and making it unique to the button.
 </P></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>data</code> - array for copying the binding code for user's scratchpad</dd>
<dd><code>offset</code> - the index at which to start copying.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../container/OneWireContainer18.html#bindSecretToiButton(int,byte%5B%5D,byte%5B%5D,int)"><code>OneWireContainer18.bindSecretToiButton(int,byte[],byte[],int)</code></a></dd>
</dl>
</li>
</ul>
<a id="getBindData()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBindData</h4>
<pre class="methodSignature">public&nbsp;byte[]&nbsp;getBindData()</pre>
<div class="block"><P>
 Returns 32 byte binding data for finalizing secret installation on user
 buttons. This is copied into the user's account data page (see
 <code>bindSecretToiButton</code>) for finalizing the secret and making it
 unique to the button.
 </P></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the binding data for user's data page</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../container/OneWireContainer18.html#bindSecretToiButton(int,byte%5B%5D,byte%5B%5D,int)"><code>OneWireContainer18.bindSecretToiButton(int,byte[],byte[],int)</code></a></dd>
</dl>
</li>
</ul>
<a id="getBindData(byte[],int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBindData</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;getBindData&#8203;(byte[]&nbsp;data,
                        int&nbsp;offset)</pre>
<div class="block"><P>
 Copies 32 byte binding data for finalizing secret installation on user
 buttons. This is then copied into the user's account data page (see
 <code>bindSecretToiButton</code>) for finalizing the secret and making it
 unique to the button.
 </P></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>data</code> - array for copying the binding data for user's data page</dd>
<dd><code>offset</code> - the index at which to start copying.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../container/OneWireContainer18.html#bindSecretToiButton(int,byte%5B%5D,byte%5B%5D,int)"><code>OneWireContainer18.bindSecretToiButton(int,byte[],byte[],int)</code></a></dd>
</dl>
</li>
</ul>
<a id="getEncryptionCode()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEncryptionCode</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;getEncryptionCode()</pre>
<div class="block"><P>
 Returns an integer representing the encryption code for this coprocessor. No
 handling of specific encryption codes are in place with this API, but could
 be added easily at the <code>SHATransaction</codE> layer.
 </P></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an integer representing type of encryption for user data.</dd>
</dl>
</li>
</ul>
<a id="getFilename(byte[],int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFilename</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;getFilename&#8203;(byte[]&nbsp;l_filename,
                        int&nbsp;offset)</pre>
<div class="block"><P>
 Copies the filename (used for storing account data on user buttons) into the
 specified array starting at the specified offset.
 </P></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>l_filename</code> - the array into which the filename will be copied.</dd>
<dd><code>offset</code> - the starting index for copying the filename.</dd>
</dl>
</li>
</ul>
<a id="getFilenameExt()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFilenameExt</h4>
<pre class="methodSignature">public&nbsp;byte&nbsp;getFilenameExt()</pre>
<div class="block"><P>
 Returns the extension of the filename used for storing account data on user
 buttons. If the type of this service is an e-cash application, the file
 extension will be decimal 102.
 </P></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>proper file extension for user's account data file.</dd>
</dl>
</li>
</ul>
<a id="getInitialSignature()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInitialSignature</h4>
<pre class="methodSignature">public&nbsp;byte[]&nbsp;getInitialSignature()</pre>
<div class="block"><P>
 Returns the 20-byte initial signature used by this coprocessor for signing
 account data.
 </P></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>20-byte initial signature.</dd>
</dl>
</li>
</ul>
<a id="getInitialSignature(byte[],int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInitialSignature</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;getInitialSignature&#8203;(byte[]&nbsp;data,
                                int&nbsp;offset)</pre>
<div class="block"><P>
 Copies the 20-byte initial signature used by this coprocessor for signing
 account data into the specified array starting at the specified offset.
 </P></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>data</code> - array for copying the 20-byte initial signature.</dd>
<dd><code>offset</code> - the index at which to start copying.</dd>
</dl>
</li>
</ul>
<a id="getLastError()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastError</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;getLastError()</pre>
<div class="block"><P>
 Returns error code matching last error encountered by the coprocessor. An
 error code of zero implies NO_ERROR.
 </P></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the error code, zero for none.</dd>
</dl>
</li>
</ul>
<a id="getProviderName()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getProviderName</h4>
<pre class="methodSignature">public&nbsp;java.lang.String&nbsp;getProviderName()</pre>
<div class="block"><P>
 Returns a string representing the Provider name associated with this
 coprocessor's service.
 </P></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the name of the provider's service.</dd>
</dl>
</li>
</ul>
<a id="getSigningChallenge()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSigningChallenge</h4>
<pre class="methodSignature">public&nbsp;byte[]&nbsp;getSigningChallenge()</pre>
<div class="block"><P>
 Returns the 3-byte signing challenge used by this coprocessor for data
 validation.
 </P></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>3-byte challenge</dd>
</dl>
</li>
</ul>
<a id="getSigningChallenge(byte[],int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSigningChallenge</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;getSigningChallenge&#8203;(byte[]&nbsp;data,
                                int&nbsp;offset)</pre>
<div class="block"><P>
 Copies the 3-byte signing challenge used by this coprocessor for data
 validation into the specified array starting at the specified offset.
 </P></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>data</code> - the array for copying the 3-byte challenge.</dd>
<dd><code>offset</code> - the index at which to start copying.</dd>
</dl>
</li>
</ul>
<a id="getSigningPageNumber()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSigningPageNumber</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;getSigningPageNumber()</pre>
<div class="block"><P>
 Returns the page number used by this coprocessor for signing account data.
 </P></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>page number used for signing</dd>
</dl>
</li>
</ul>
<a id="getVersion()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVersion</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;getVersion()</pre>
<div class="block"><P>
 Returns the version number of this service.
 </P></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>version number for service.</dd>
</dl>
</li>
</ul>
<a id="getWorkspacePageNumber()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getWorkspacePageNumber</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;getWorkspacePageNumber()</pre>
<div class="block"><P>
 Returns the page number used by this coprocessor for regenerating the user
 authentication. This page is the target page for
 <code>bindSecretToiButton</code> when trying to reproduce a user's
 authentication secret.
 </P></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>page number used for regenerating user authentication.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../container/OneWireContainer18.html#bindSecretToiButton(int,byte%5B%5D,byte%5B%5D,int)"><code>OneWireContainer18.bindSecretToiButton(int,byte[],byte[],int)</code></a></dd>
</dl>
</li>
</ul>
<a id="isDS1961Scompatible()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isDS1961Scompatible</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;isDS1961Scompatible()</pre>
<div class="block"><P>
 Returns a boolean indicating whether or not this coprocessor's secret's were
 formatted for compatibility with the DS1961S.
 </P></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if this coprocessor can authenticate a DS1961S
         using it's system authentication secret.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#reformatFor1961S(byte%5B%5D)"><code>reformatFor1961S(byte[])</code></a></dd>
</dl>
</li>
</ul>
<a id="createDataSignature(byte[],byte[],byte[],int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createDataSignature</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;createDataSignature&#8203;(byte[]&nbsp;accountData,
                                   byte[]&nbsp;signScratchpad,
                                   byte[]&nbsp;mac_buffer,
                                   int&nbsp;macStart)
                            throws <a href="../../OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a>,
                                   <a href="../../adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a></pre>
<div class="block"><P>
 Given a 32-byte array for page data and a 32-byte array for scratchpad
 content, this function will create a 20-byte signature for the data based on
 SHA-1. The format of the calculation of the data signature is as follows:
 First 4-bytes of signing secret, 32-bytes of accountData, 12 bytes of
 scratchpad data starting at index 8, last 4-bytes of signing secret, 3 bytes
 of scratchpad data starting at index 20, and the rest is padding as specified
 for standard SHA-1. This is all laid out, in detail, in the DS1963S data
 sheet.
 </P>

 <P>
 The resulting 20-byte signature is copied into <code>mac_buffer</code>
 starting at <code>macStart</code>. If you're updating a signature that
 already exists in the accountData array, it is acceptable to call the method
 like so: <code><pre>
   copr.createDataSignature(accountData, spad, accountData, 8);
 </pre></code> assuming that the signature starts at index 8 of the
 accountData array.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>accountData</code> - the 32-byte data page for which the signature is
                       generated.</dd>
<dd><code>signScratchpad</code> - the 32-byte scratchpad contents for which the signature
                       is generated. This will contain parameters such as the
                       user's write cycle counter for the page, the user's
                       1-wire address, and the page number where account data
                       is stored.</dd>
<dd><code>mac_buffer</code> - used to return the 20-byte signature generated by
                       signing the page using the coprocessor's system signing
                       secret.</dd>
<dd><code>macStart</code> - the offset into mac_buffer where copying should start.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if successful, <code>false</code> if an error
         occurred (use <code>getLastError()</code> for more information on the
         type of error)</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a></code> - on a 1-Wire communication error such as reading an
                            incorrect CRC from a 1-Wire device. This could be
                            caused by a physical interruption in the 1-Wire
                            Network due to shorts or a newly arriving 1-Wire
                            device issuing a 'presence pulse'.</dd>
<dd><code><a href="../../OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a></code> - on a communication or setup error with the 1-Wire
                            adapter</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../container/OneWireContainer18.html#SHAFunction(byte,int)"><code>OneWireContainer18.SHAFunction(byte,int)</code></a>, 
<a href="#getLastError()"><code>getLastError()</code></a></dd>
</dl>
</li>
</ul>
<a id="createDataSignatureAuth(byte[],byte[],byte[],int,byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createDataSignatureAuth</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;createDataSignatureAuth&#8203;(byte[]&nbsp;accountData,
                                       byte[]&nbsp;signScratchpad,
                                       byte[]&nbsp;mac_buffer,
                                       int&nbsp;macStart,
                                       byte[]&nbsp;fullBindCode)
                                throws <a href="../../OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a>,
                                       <a href="../../adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a></pre>
<div class="block"><p>
 Creates a data signature, but instead of using the signing secret, it uses
 the authentication secret, bound for a particular button.
 </p>

 <P>
 fullBindCode can be null if the secret is already bound and in the signing
 page.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>accountData</code> - the 32-byte data page for which the signature is
                       generated.</dd>
<dd><code>signScratchpad</code> - the 32-byte scratchpad contents for which the signature
                       is generated. This will contain parameters such as the
                       user's write cycle counter for the page, the user's
                       1-wire address, and the page number where account data
                       is stored.</dd>
<dd><code>mac_buffer</code> - used to return the 20-byte signature generated by
                       signing the page using the coprocessor's system signing
                       secret.</dd>
<dd><code>macStart</code> - the offset into mac_buffer where copying should start.</dd>
<dd><code>fullBindCode</code> - used to recreate the user iButton's unique secret</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if successful, <code>false</code> if an error
         occurred (use <code>getLastError()</code> for more information on the
         type of error)</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a></code> - on a 1-Wire communication error such as reading an
                            incorrect CRC from a 1-Wire device. This could be
                            caused by a physical interruption in the 1-Wire
                            Network due to shorts or a newly arriving 1-Wire
                            device issuing a 'presence pulse'.</dd>
<dd><code><a href="../../OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a></code> - on a communication or setup error with the 1-Wire
                            adapter</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../container/OneWireContainer18.html#SHAFunction(byte,int)"><code>OneWireContainer18.SHAFunction(byte,int)</code></a>, 
<a href="#createDataSignature(byte%5B%5D,byte%5B%5D,byte%5B%5D,int)"><code>createDataSignature(byte[],byte[],byte[],int)</code></a>, 
<a href="#getLastError()"><code>getLastError()</code></a></dd>
</dl>
</li>
</ul>
<a id="generateChallenge(int,byte[],int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateChallenge</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;generateChallenge&#8203;(int&nbsp;offset,
                                 byte[]&nbsp;ch,
                                 int&nbsp;start)
                          throws <a href="../../adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a>,
                                 <a href="../../OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a></pre>
<div class="block"><p>
 Generates a 3 byte random challenge in the iButton, sufficient to be used as
 a challenge to be answered by a User iButton. The user answers the challenge
 with an authenticated read of it's account data.
 </p>

 <p>
 The DS1963S will generate 20 bytes of pseudo random data, though only 3 bytes
 are needed for the challenge. Programs can add more 'randomness' by selecting
 different bytes from the 20 bytes of random data using the
 <code>offset</code> parameter.
 </p>

 <p>
 The random number generator is actually the DS1963S's SHA engine, which
 requires page data to compute a hash. Select a page number with the
 <code>page_number</code> parameter.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>offset</code> - offset into the 20 random bytes to draw random data from (must
               be in range 0-16)</dd>
<dd><code>ch</code> - buffer for the challenge to be returned (must be of length 3 or
               more)</dd>
<dd><code>start</code> - the starting index into array <code>ch</code> to begin copying
               the challenge bytes.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if successful, <code>false</code> if an error
         occurred (use <code>getLastError()</code> for more information on the
         type of error)</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a></code> - on a 1-Wire communication error such as reading an
                            incorrect CRC from a 1-Wire device. This could be
                            caused by a physical interruption in the 1-Wire
                            Network due to shorts or a newly arriving 1-Wire
                            device issuing a 'presence pulse'.</dd>
<dd><code><a href="../../OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a></code> - on a communication or setup error with the 1-Wire
                            adapter</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="SHAiButtonUser.html#readAccountData(byte%5B%5D,int,byte%5B%5D,int,byte%5B%5D,int)"><code>SHAiButtonUser.readAccountData(byte[],int,byte[],int,byte[],int)</code></a>, 
<a href="#getLastError()"><code>getLastError()</code></a></dd>
</dl>
</li>
</ul>
<a id="verifyAuthentication(byte[],byte[],byte[],byte[],byte)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verifyAuthentication</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;verifyAuthentication&#8203;(byte[]&nbsp;fullBindCode,
                                    byte[]&nbsp;pageData,
                                    byte[]&nbsp;scratchpad,
                                    byte[]&nbsp;verify_mac,
                                    byte&nbsp;authCmd)
                             throws <a href="../../adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a>,
                                    <a href="../../OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a></pre>
<div class="block"><p>
 Determines if a <code>SHAiButtonUser</code> belongs to the system defined by
 this Coprocessor iButton.See the usage example in this class for initializing
 a Coprocessor iButton.
 </p>

 <p>
 The first step in user authentication is to recreate the user's unique secret
 on the coprocessor button using
 <code>bindSecretToiButton(int,byte[],byte[],int)</code>. Then the coprocessor
 signs the pageData to produce a MAC. If the MAC matches that produced by the
 user, the user belongs to the system.
 </p>

 <p>
 The TMEX formatted page with the user's account data is in the 32-byte
 parameter <code>pageData</code>. If the verification is successful, the data
 data signature must still be verified with the <code>verifySignature()</code>
 method.
 </p>

 <p>
 Failure of this method does not necessarily mean that the User iButton does
 not belong to the system. It is possible that a communication disruption here
 could cause a CRC error that would be indistinguishable from a failed
 authentication. However, repeated attempts should reveal whether it was truly
 a communication problem or a User iButton that does not belong to the system.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>fullBindCode</code> - 15-byte binding code used to recreate user iButtons
                     unique secret in the coprocessor.</dd>
<dd><code>pageData</code> - 32-byte buffer containing the data page holding the
                     user's account data.</dd>
<dd><code>scratchpad</code> - the 32-byte scratchpad contents for which the signature
                     is generated. This will contain parameters such as the
                     user's write cycle counter for the page, the user's
                     1-wire address, and the page number where account data is
                     stored.</dd>
<dd><code>verify_mac</code> - the 20-byte buffer containing the user's authentication
                     response to the coprocessor's challenge.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the operation was successful and the user's MAC
         matches that generated by the coprocessor.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a></code> - on a 1-Wire communication error such as reading an
                            incorrect CRC from a 1-Wire device. This could be
                            caused by a physical interruption in the 1-Wire
                            Network due to shorts or a newly arriving 1-Wire
                            device issuing a 'presence pulse'.</dd>
<dd><code><a href="../../OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a></code> - on a communication or setup error with the 1-Wire
                            adapter</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#generateChallenge(int,byte%5B%5D,int)"><code>generateChallenge(int,byte[],int)</code></a>, 
<a href="#verifySignature(byte%5B%5D,byte%5B%5D,byte%5B%5D)"><code>verifySignature(byte[],byte[],byte[])</code></a>, 
<a href="../../container/OneWireContainer18.html#bindSecretToiButton(int,byte%5B%5D,byte%5B%5D,int)"><code>OneWireContainer18.bindSecretToiButton(int,byte[],byte[],int)</code></a>, 
<a href="../../container/OneWireContainer18.html#SHAFunction(byte,int)"><code>OneWireContainer18.SHAFunction(byte,int)</code></a>, 
<a href="../../container/OneWireContainer18.html#matchScratchPad(byte%5B%5D)"><code>OneWireContainer18.matchScratchPad(byte[])</code></a>, 
<a href="#getLastError()"><code>getLastError()</code></a></dd>
</dl>
</li>
</ul>
<a id="verifySignature(byte[],byte[],byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verifySignature</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;verifySignature&#8203;(byte[]&nbsp;pageData,
                               byte[]&nbsp;scratchpad,
                               byte[]&nbsp;verify_mac)
                        throws <a href="../../adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a>,
                               <a href="../../OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a></pre>
<div class="block"><P>
 Verifies a User iButton's signed data on this Coprocessor iButton. The
 Coprocessor must recreate the signature based on the data in the file and the
 contents of the given scratchpad, and then match that with the signature
 passed in verify_mac.
 </P></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pageData</code> - the full 32 byte TMEX file from the User iButton (from
                   <code>verifyAuthentication</code>) with the</dd>
<dd><code>scratchpad</code> - the 32-byte scratchpad contents for which the signature is
                   generated. This will contain parameters such as the user's
                   write cycle counter for the page, the user's 1-wire
                   address, and the page number where account data is stored.</dd>
<dd><code>verify_mac</code> - the 20-byte buffer containing the signature the user had
                   stored with the account data file.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true<code> if the data file is valid, <code>false</code> if an
         error occurred (use <code>getLastError()</code> for more information
         on the type of error)</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a></code> - on a 1-Wire communication error such as reading an
                            incorrect CRC from a 1-Wire device. This could be
                            caused by a physical interruption in the 1-Wire
                            Network due to shorts or a newly arriving 1-Wire
                            device issuing a 'presence pulse'.</dd>
<dd><code><a href="../../OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a></code> - on a communication or setup error with the 1-Wire
                            adapter</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#verifyAuthentication(byte%5B%5D,byte%5B%5D,byte%5B%5D,byte%5B%5D,byte)"><code>verifyAuthentication(byte[],byte[],byte[],byte[],byte)</code></a>, 
<a href="#getLastError()"><code>getLastError()</code></a></dd>
</dl>
</li>
</ul>
<a id="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre class="methodSignature">public&nbsp;java.lang.String&nbsp;toString()</pre>
<div class="block">Returns a string representing the 1-Wire address of this SHAiButton.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a string containing the 8-byte address of this 1-Wire device.</dd>
</dl>
</li>
</ul>
<a id="fromStream(java.io.InputStream)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fromStream</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;fromStream&#8203;(java.io.InputStream&nbsp;is)
                   throws java.io.IOException</pre>
<div class="block">Configuration helper. Used also by Coprocessor VM</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="toStream(java.io.OutputStream)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toStream</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;toStream&#8203;(java.io.OutputStream&nbsp;os)
                 throws java.io.IOException</pre>
<div class="block">Configuration saving method. Used also by Coprocessor VM</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="reformatFor1961S(byte[])">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>reformatFor1961S</h4>
<pre class="methodSignature">public static&nbsp;byte[]&nbsp;reformatFor1961S&#8203;(byte[]&nbsp;auth_secret)</pre>
<div class="block"><P>
 Static method that reformats the inputted authentication secret so it is
 compatible with the DS1961S. This means that for every group of 47 bytes in
 the secret, bytes at indices 32-35 and indices 44-46 are all set to 0xFF.
 Check the format for secret generation in the DS1961S data sheet to verify
 format of digest buffer.
 </P>

 <P>
 Note that if a coprocessor button uses this formatted secret, this function
 should be called for all user buttons including the DS1963S and DS1961S to
 ensure compatibility
 </P></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>auth_secret</code> - the authentication secret to be reformatted.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a reformatted authentication secret, with the appropriate padding for
         DS1961S interaction.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
